jQuery.cookie=function(c,k,n){if(typeof k!="undefined"){n=n||{};if(k===null){k="";n.expires=-1}var f="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var g;if(typeof n.expires=="number"){g=new Date();g.setTime(g.getTime()+(n.expires*24*60*60*1000))}else{g=n.expires}f="; expires="+g.toUTCString()}var m=n.path?"; path="+n.path:"";var h=n.domain?"; domain="+n.domain:"";var b=n.secure?"; secure":"";document.cookie=[c,"=",encodeURIComponent(k),f,m,h,b].join("")}else{var e=null;if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");for(var j=0;j<l.length;j++){var d=jQuery.trim(l[j]);if(d.substring(0,c.length+1)==(c+"=")){e=decodeURIComponent(d.substring(c.length+1));break}}}return e}};jQuery(function(e){var d=function(i,j){var h=new Image();h.onload=function(){j()};h.src=i};var f=function(l,m){if(typeof l=="string"){d(l,m)}else{if(typeof l=="object"){var k=0,j=l.length;for(var h=0;h<j;h++){d(l[h],function(){k++;if(k==j){m()}})}}}};var c=function(h,j){var l,i=0,k=h.parent().next().find("li");function m(){l=setTimeout(function(){if(i<j){i++}else{i=0}h.eq(i).show().siblings().hide();k.eq(i).addClass("selected").siblings().removeClass("selected");m()},3000)}k.eq(0).addClass("selected");m();h.hover(function(){clearTimeout(l)},function(){m()});k.click(function(){clearTimeout(l);i=e(this).attr("index");h.eq(i).show().siblings().hide();k.eq(i).addClass("selected").siblings().removeClass("selected")})};var b=function(n){var q=[],m=e('<ul class="sliderImage"></ul>'),l=e('<ul class="sliderList"></ul>');var k=0;for(var j in n){var p=n[j];if(p.status==1){var h='<a href="'+p.href_url+'" title="'+p.image_title+'" target="_blank"><img src="'+p.image_url+'" /></a>';e("<li></li>").html(h).appendTo(m);e("<li></li>").attr("index",k).appendTo(l);q.push(p.image_url);k++}}l.css({left:405-q.length*14,width:q.length*16});f(q,function(){e("#banner_list").html(m).append(l);c(m.children(),q.length-1)})};var g=function(){e.ajax({url:"http://www.dbank.com/app/web/bannermanage/banner_manage.php?action=select_bannerlist",type:"get",dataType:"jsonp",jsonp:"jsoncallback",timeout:10000,success:function(l){if(l){l=e.parseJSON(l);nsp.netdisk.putcommon("banner","banner",l);if(l.index_banner){b(l.index_banner)}if(l.search_text){var k=l.search_text,j=0,m=[];m.push('<div class="keykg">');for(var h in k){j++;if(j==6){m.push('</div><div class="keykg">')}m.push('<a href="javascript:;">'+k[h]["text_title"]+"</a>")}m.push("</div>");e("#resource_list").html(m.join(""))}}},error:function(){e.warning({message:"替换失败"})}})};Rookie(function(){var l=nsp.netdisk.getcommon("banner","banner");if(l){if(l.index_banner){b(l.index_banner)}if(l.search_text){var k=l.search_text,j=0,m=[];m.push('<div class="keykg">');for(var h in k){j++;if(j==6){m.push('</div><div class="keykg">')}m.push('<a href="javascript:;">'+k[h]["text_title"]+"</a>")}m.push("</div>");e("#resource_list").html(m.join(""))}}else{g()}},function(){g()})});var regexEnum={email:"^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$",chinese:"^[\\u4E00-\\u9FA5\\uF900-\\uFA2D]+$",notempty:"^\\S+$",username:"^\\w+$",password:"^[A-Za-z0-9~!@#%\\^\\*\\(\\)\\-_\\.=\\+\\{\\}\\[\\]:;\"',/<>?\\|\\\\]+$",engAndChinese:"^([\\u4E00-\\u9FA5]|[\\uF900-\\uFA2D]|[A-Za-z])+$",nickname:"^([\\u4E00-\\u9FA5]|[\\uF900-\\uFA2D]|[A-Za-z]|[0-9.]|-|_)+$",captcha:"^[a-zA-Z0-9]+$"};var H={};H.Scroll=(function(){var b={},g,h=0,k=0,j=5,q=30,d,i=0,f=0,o=true,p;if($.browser.msie&&$.browser.version==8){j=1;q=70}var m=function(){if(h!=k){o=false;g=window.setTimeout(function(){var s=h+q;var r=true;if(h>k){s=h-q;r=false}h=s;if(r){if(h>k){h=k}}else{if(h<k){h=k}}d.scrollTop(h);if(h!=k){m()}else{o=true;if(g){window.clearTimeout(g)}if(p){p();p=null}}},j)}else{if(g){window.clearTimeout(g)}o=true;h=k=0}};var e=function(){var s;var r=function(){s=window.setTimeout(function(){var t=d.scrollTop();var u=0;if(i>0){u=Math.floor(t/i)}if(u!=f){if(b.list[f]){b.list[f].Tab.removeClass("choose")}if(b.list[u]){b.list[u].Tab.addClass("choose")}f=u}if(s){window.clearTimeout(s)}r()},16)};r()};var c=function(v){if(b.list&&b.list[v]){var u=b.list[v];var r=u.Content;var s=r.offset().top;h=d.scrollTop();k=s-b.list[0].Content.offset().top;if(o){m()}}};var l=function(){if(b.list){for(var s=0,r=b.list.length;s<r;s++){var t=b.list[s];t.Tab.bind("click",{ind:s},function(v){var u=v.data.ind;c(u);return false})}e();$(window).bind("resize",function(){if(n){window.clearTimeout(n)}n=window.setTimeout(function(){if(b.list&&b.list.length){i=b.list[0].Content.height()}c(f);if(n){window.clearTimeout(n)}},100)})}};var n;return{Init:function(s,r){d=s;b.list=r;if(b.list.length){i=b.list[0].Content.height()}l()},Move:function(r,s){c(r);p=s}}})();(function(){var c=$(".scrollctn");var d=$(".gototop li");var b=[];c.each(function(e){b.push({Tab:$(d[e]),Content:$(this)})});H.Scroll.Init($("#allscroll"),b)})();$(document).ready(function(){H.Scroll.Move(0)});(function(){var h=document.getElementById("cse-search-box");if(!h){h=document.getElementById("searchbox_demo")}if(h&&h.q){var g=h.q;var j=navigator;var b=location;var c=function(){var i=document.createElement("input");var f=document.location.toString();var l=/(?:[?&]siteurl=)([^&#]*)/.exec(f);if(l){f=decodeURI(l[1])}var k=f.indexOf("://");if(k>=0){f=f.substring(k+"://".length,f.length)}i.name="siteurl";i.value=f;i.type="hidden";h.appendChild(i)};if(j.appName=="Microsoft Internet Explorer"){var e=h.parentNode.childNodes;for(var d=0;d<e.length;d++){if(e[d].nodeName=="SCRIPT"&&e[d].attributes.src&&e[d].attributes.src.nodeValue==unescape("http:\x2F\x2Fwww.google.com\x2Fcse\x2Fbrand?form=cse-search-box\x26lang=zh-Hans")){c();break}}}else{c()}if(window.history.navigationMode){window.history.navigationMode="compatible"}}})();var begin=new Date();var page_start=begin.getTime();function loadScript(c,d){var b=document.createElement("script");b.type="text/javascript";if(b.readyState){b.onreadystatechange=function(){if(b.readyState=="loaded"||b.readyState=="complete"){b.onreadystatechange=null;if(typeof d=="function"){d()}}}}else{b.onload=function(){if(typeof d=="function"){d()}}}b.src=c;document.getElementsByTagName("head")[0].appendChild(b)}function trim(b){return b.replace(/^\s+|\s+$/i,"")}jQuery(function(){if(navigator.userAgent.toLowerCase().indexOf("chrome")>=0){$(window).load(function(){$("input:-webkit-autofill").each(function(){var c=$(this).val();var b=$(this).attr("name");$(this).after(this.outerHTML).remove();$("input[name="+b+"]").val(c)})})}});(function(){if($("#relogtips").text()){$("#relogtips").css("visibility","visible");$("#loginsubmit").attr("disabled","disabled").addClass("btn-login-unbind");var g=parseInt($("#relog").val(),10)-1;var f=setInterval(function(){if(g<0){clearInterval(f);$("#relogtips").css("visibility","hidden");$("#loginsubmit").removeAttr("disabled").removeClass("btn-login-unbind");return}$("#relogtips").html("请勿频繁登录，"+g+"秒后重试");g--},1000)}else{if($("#logintips").text()){$("#logintips").css("visibility","visible")}}$("#uname").bind("blur",e);$("#uhard").bind("blur",i);$("#uemail").bind("blur",function(){var j=b();if(!j){return}else{$.ajax({url:"http://login.dbank.com/web/loginaction.php?action=checkAccount",data:{account:$.trim($("#uemail").val())},dataType:"jsonp",jsonp:"jsoncallback",success:function(k){if(k.retcode=="9006"){$("#uemailtips").html("邮箱已注册，请直接登录").attr("class","wmsg").css("display","inline")}else{$("#uemailtips").html("").hide();return true}}})}});$("#uname").focus(function(){$(this).removeClass("namemask");$("#unametips").html("可输入2-30位中英文、数字").attr("class","nmsg1").css("display","inline")});$("#uemail").focus(function(){$(this).removeClass("emailmask");$("#uemailtips").html("请输入您的常用邮箱，如163@163.com，它将成为您未来的登录帐号").attr("class","nmsg2").css("display","inline")});$("#uhard").focus(function(){$(this).removeClass("hardmask");$("#uhardtips").html("由6-32位半角字符（英文、数字、符号）组成，区分大小写").attr("class","nmsg2").css("display","inline")});$("#keyword").blur(function(){if(this.value.length==0){this.value="输入您要搜索的内容";$(this).css("color","#B5B5B5")}});$("#keyword").focus(function(){if(this.value=="输入您要搜索的内容"){this.value="";$(this).css("color","#000")}});$("#keyword").keydown(function(){if(this.value.indexOf("输入您要搜索的内容")!=-1){this.value="";$(this).css("color","#000")}});$("#member,#password,#uname,#uemail,#uhard,#keyword").focus(function(){this.select()});$("#searchbtn").hover(function(){$(this).find(".scrobg").slideDown(100)},function(){$(this).find(".scrobg").slideUp(100)});$("#uptopbtn").hover(function(){$(this).find(".upscrobg").slideDown(100)},function(){$(this).find(".upscrobg").slideUp(100)});$("#regsubmit").bind("click",function(){if(!c()){return}$.ajax({url:"http://login.dbank.com/web/register.php",data:{account:$.trim($("#uemail").val()),username:$.trim($("#uname").val()),password:$("#uhard").val(),regfrom:50147},dataType:"jsonp",jsonp:"jsoncallback",success:function(j){switch(j.retcode){case"9001":$("#unametips").html("参数错误").attr("class","wmsg").css("display","inline");break;case"9002":$("#uemailtips").html("邮箱不符合规则，请重新输入").attr("class","wmsg1").css("display","inline");break;case"9003":$("#uhardtips").html("密码不符合规则，请重新输入").attr("class","wmsg1").css("display","inline");break;case"9005":$("#unametips").html("昵称不符合规则，请重新输入").attr("class","wmsg1").css("display","inline");break;case"9006":$("#uemailtips").html("邮箱已注册，请直接登录").attr("class","wmsg").css("display","inline");break;case"0000":window.location.href="http://www.dbank.com/netdisk/sendEmailSucc.html?v=2.5.7&name="+$.trim($("#uname").val())+"&email="+$.trim($("#uemail").val())+"&url="+j.emailloginurl;break;default:alert("哇哦！出错了，请稍后重试");break}}})});function c(){var j=0;var m=$.trim($("#uemail").val());if(!m||m.length<=0){$("#uemailtips").html("请输入常用邮箱").attr("class","wmsg").css("display","inline");$("#uemail").addClass("emailmask");j=1}var l=$.trim($("#uname").val());if(!l||l.length<=0){$("#unametips").html("请输入您的昵称").attr("class","wmsg").css("display","inline");$("#uname").addClass("namemask");j=1}var k=$.trim($("#uhard").val());if(!k||k.length<=0){$("#uhardtips").html("密码太短，最少6位").attr("class","wmsg").css("display","inline");$("#uhard").addClass("hardmask");j=1}if(j==1){return false}if(!b()||!i()||!e()){return false}return true}function e(){var j=$.trim($("#uname").val());if(!j||j.length<=0){$("#unametips").hide();$("#uname").addClass("namemask");return false}else{if(h(j)<2||h(j)>30||!new RegExp(regexEnum.nickname).test(j)){$("#unametips").html("可输入2-30位中英文、数字").attr("class","wmsg1").css("display","inline");return false}}$("#unametips").html("").hide();return true}function b(){var j=$.trim($("#uemail").val());if(!j||j.length<=0){$("#uemailtips").hide();$("#uemail").addClass("emailmask");return false}else{if(!new RegExp(regexEnum.email).test(j)){$("#uemailtips").html("请输入正确的邮箱地址").attr("class","wmsg").css("display","inline");return false}}$("#uemailtips").html("").hide();return true}function i(){var j=$.trim($("#uhard").val());if(!j||j.length<=0){$("#uhardtips").hide();$("#uhard").addClass("hardmask");return false}else{if(j.length<6){$("#uhardtips").html("密码太短，最少6位").attr("class","wmsg").css("display","inline");return false}else{if(j.length>32){$("#uhardtips").html("密码太长了，最多32位").attr("class","wmsg").css("display","inline");return false}else{if(!new RegExp(regexEnum.password).test(j)){$("#uhardtips").html("请输入6-32位英文、数字或符号，英文区分大小写").attr("class","wmsg2").css("display","inline");return false}}}}$("#uhardtips").html("").hide();return true}$("#keyword").blur();$("#cse-search-box").submit(function(){if($("#keyword").val()=="输入您要搜索的内容"||!$("#keyword").val()){return false}else{return true}});$("#resource_list a").live("click",function(){$("#keyword").val($(this).text());$("#cse-search-box").submit();$("#keyword").val("")});$("#banner_list a").bind("click",function(){var j=this.id.split("_")[1];dbank.stat(j)});$("#allscroll").scroll(function(){$(".bdSug_wpr").css({top:$("#keyword").offset().top+$("#keyword").height()})});function h(n,j){var l=0;var m=0;str_cut=new String();m=n.length;for(var k=0;k<m;k++){a=n.charAt(k);l++;if(escape(a).length>4){l++}if(j&&j>0){if(l>parseInt(j,10)+1){str_cut=str_cut.concat("..");return str_cut}else{str_cut=str_cut.concat(a)}}}if(j&&j>0){if(l<=parseInt(j,10)+1){return n}}return l}var d=["qq.com","163.com","126.com","sina.com","hotmail.com","gmail.com","yahoo.com.cn","sohu.com","vip.qq.com","yahoo.cn","tom.com"];$("#uemail").keyup(function(q){var p=$(this),s=$.trim(p.val()),j=[],k=s.split("@"),l,t=p.offset(),r,u,o;if(s!==""){if(q.keyCode==40){$("#db_note_tags li.sel").next("li").addClass("sel").siblings().removeClass("sel")}else{if(q.keyCode==38&&$("#db_note_tags li.sel").attr("id")!=0){$("#db_note_tags li.sel").prev("li").addClass("sel").siblings().removeClass("sel")}else{if(q.keyCode==13){if($("#db_note_tags").is(":visible")){p.val($("#db_note_tags li.sel").text());if($("#db_note_tags")){$("#db_note_tags ").hide()}p.focus();return false}}else{l=k[0];if(k.length<=1){for(var m in d){j.push(l+"@"+d[m])}}else{if(k.length==2){for(var m in d){d[m].indexOf(k[1])==0?j.push(k.slice(0,-1).join("@")+"@"+d[m]):""}}}if(!j.length){j.push(s)}if($("#db_note_tags")){$("#db_note_tags").remove()}if(j.length!=0){r=$("<ul>").attr("id","db_note_tags").css({left:(t.left)+"px",top:(t.top+p.outerHeight())+"px"}).append("<li>请选择邮箱类型</li>");var n="";$.each(j,function(w,v){n+='<li id="'+w+'" title="'+v+'">'+v+"</li>"});r.append(n).appendTo($("#allscroll")).find("li:gt(0)").each(function(){$("#db_note_tags li:eq(1)").addClass("sel");$(this).click(function(){p.val($(this).text());p.focus()}).mouseover(function(){$("#db_note_tags li").removeClass("sel");$(this).addClass("sel")})})}}}}}else{if($("#db_note_tags")){$("#db_note_tags").remove()}}}).blur(function(){if($("#db_note_tags")){setTimeout(function(){$("#db_note_tags ").hide()},200)}});$("#searchsubmit").hover(function(){$(this).css("background","url(http://st1.dbank.com/images/index/icon5.png)")},function(){$(this).css("background","url(http://st1.dbank.com/images/index/icon6.png)")}).mousedown(function(){$(this).css("background","url(http://st1.dbank.com/images/index/icon16.png)")}).mouseup(function(){$(this).css("background","url(http://st1.dbank.com/images/index/icon5.png)")});if($.browser.msie&&$.browser.version==6){$(window).resize(function(){$("#allscroll").width($(window).width())});if($("#scrollctn").height()<820){$("#scrollctn").css({height:820})}}})();