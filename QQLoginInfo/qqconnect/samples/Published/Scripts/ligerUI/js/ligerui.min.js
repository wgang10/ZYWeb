if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetAccordionManager=function(){return LigerUIManagers[this[0].id+"_Accordion"]};A.fn.ligerRemoveAccordionManager=function(){return this.each(function(){LigerUIManagers[this.id+"_Accordion"]=null})};A.fn.ligerAccordion=function(B){return this.each(function(){B=A.extend({height:null,speed:"normal",changeHeightOnResize:false,heightDiff:0},B||{});if(this.usedAccordion){return}var D={onResize:function(){if(!B.height||typeof(B.height)!="string"||B.height.indexOf("%")==-1){return false}if(D.accordion.parent()[0].tagName.toLowerCase()=="body"){var E=A(window).height();E-=parseInt(D.layout.parent().css("paddingTop"));E-=parseInt(D.layout.parent().css("paddingBottom"));D.height=B.heightDiff+E*parseFloat(D.height)*0.01}else{D.height=B.heightDiff+(D.accordion.parent().height()*parseFloat(B.height)*0.01)}D.accordion.height(D.height);D.setContentHeight(D.height-D.headerHoldHeight)},setHeight:function(E){D.accordion.height(E);E-=D.headerHoldHeight;A("> .l-accordion-content",D.accordion).height(E)}};D.accordion=A(this);if(!D.accordion.hasClass("l-accordion-panel")){D.accordion.addClass("l-accordion-panel")}var C=0;if(A("> div[lselected=true]",D.accordion).length>0){C=A("> div",D.accordion).index(A("> div[lselected=true]",D.accordion))}A("> div",D.accordion).each(function(F,E){var G=A('<div class="l-accordion-header"><div class="l-accordion-toggle"></div><div class="l-accordion-header-inner"></div></div>');if(F==C){A(".l-accordion-toggle",G).addClass("l-accordion-toggle-open")}if(A(E).attr("title")){A(".l-accordion-header-inner",G).html(A(E).attr("title"));A(E).attr("title","")}A(E).before(G);if(!A(E).hasClass("l-accordion-content")){A(E).addClass("l-accordion-content")}});A(".l-accordion-toggle",D.accordion).each(function(){if(!A(this).hasClass("l-accordion-toggle-open")&&!A(this).hasClass("l-accordion-toggle-close")){A(this).addClass("l-accordion-toggle-close")}if(A(this).hasClass("l-accordion-toggle-close")){A(this).parent().next(".l-accordion-content:visible").hide()}});A(".l-accordion-header",D.accordion).hover(function(){A(this).addClass("l-accordion-header-over")},function(){A(this).removeClass("l-accordion-header-over")});A(".l-accordion-toggle",D.accordion).hover(function(){if(A(this).hasClass("l-accordion-toggle-open")){A(this).addClass("l-accordion-toggle-open-over")}else{if(A(this).hasClass("l-accordion-toggle-close")){A(this).addClass("l-accordion-toggle-close-over")}}},function(){if(A(this).hasClass("l-accordion-toggle-open")){A(this).removeClass("l-accordion-toggle-open-over")}else{if(A(this).hasClass("l-accordion-toggle-close")){A(this).removeClass("l-accordion-toggle-close-over")}}});A(">.l-accordion-header",D.accordion).click(function(){var E=A(".l-accordion-toggle:first",this);if(E.hasClass("l-accordion-toggle-close")){E.removeClass("l-accordion-toggle-close").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over");E.addClass("l-accordion-toggle-open");A(this).next(".l-accordion-content").show(B.speed).siblings(".l-accordion-content:visible").hide(B.speed);A(this).siblings(".l-accordion-header").find(".l-accordion-toggle").removeClass("l-accordion-toggle-open").addClass("l-accordion-toggle-close")}else{E.removeClass("l-accordion-toggle-open").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over").addClass("l-accordion-toggle-close");A(this).next(".l-accordion-content").hide(B.speed)}});D.headerHoldHeight=0;A("> .l-accordion-header",D.accordion).each(function(){D.headerHoldHeight+=A(this).height()});if(B.height&&typeof(B.height)=="string"&&B.height.indexOf("%")>0){D.onResize();if(B.changeHeightOnResize){A(window).resize(function(){D.onResize()})}}else{if(B.height){D.height=B.heightDiff+B.height;D.accordion.height(D.height);D.setHeight(B.height)}else{D.header=D.accordion.height()}}if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_Accordion"]=D;this.usedAccordion=true})}})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetButtonManager=function(){return LigerUIManagers[this[0].id+"_Button"]};A.fn.ligerRemoveButtonManager=function(){return this.each(function(){LigerUIManagers[this.id+"_Button"]=null})};A.fn.ligerButton=function(B){return this.each(function(){if(this.usedButton){return}B=B||{};var C={setText:function(D){},setEnable:function(D){},setDisable:function(D){}};C.button=A(this);if(!C.button.hasClass("l-btn")){C.button.addClass("l-btn")}B.text&&C.button.append("<span>"+B.text+"</span>");C.button.append('<div class="l-btn-l"></div><div class="l-btn-r"></div>');B.click&&C.button.click(function(){B.click()});if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_Button"]=C;this.usedButton=true})}})(jQuery);(function(A){A.fn.ligerCheckBox=function(B){B=B||{};return this.each(function(){if(this.usedCheckBox){return}if(A(this).hasClass("l-hidden")){return}var C={};C.input=A(this);C.link=A('<a class="l-checkbox"></a>');C.wrapper=C.input.addClass("l-hidden").wrap('<div class="l-checkbox-wrapper"></div>').parent();C.wrapper.prepend(C.link);if(B.css){C.wrapper.css(B.css)}C.input.change(function(){if(this.checked){C.link.addClass("l-checkbox-checked")}else{C.link.removeClass("l-checkbox-checked")}return true});C.link.click(function(){if(C.input.attr("disabled")){return false}if(B.onBeforeClick){if(!B.onBeforeClick(C.input[0])){return false}}C.input.trigger("click").trigger("change");return false});C.wrapper.hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")});this.checked&&C.link.addClass("l-checkbox-checked");this.usedCheckBox=true})}})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetComboBoxManager=function(){return LigerUIManagers[this[0].id+"_ComboBox"]};A.ligerDefaults=A.ligerDefaults||{};A.ligerDefaults.ComboBox={resize:true,isMultiSelect:false,isShowCheckBox:false,columns:false,selectBoxWidth:false,selectBoxHeight:false,onBeforeSelect:false,onSelected:null,initValue:null,initText:null,valueField:"id",textField:"text",valueFieldID:null,slide:true,split:";",data:null,url:null,tree:null,treeLeafOnly:true,grid:null,onStartResize:null,onEndResize:null,hideOnLoseFocus:true};A.fn.ligerComboBox=function(B){B=A.extend({},A.ligerDefaults.ComboBox,B||{});if(B.columns){B.isShowCheckBox=true}if(B.isMultiSelect){B.isShowCheckBox=true}return this.each(function(){if(this.usedComboBox){return}if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}var E={findTextByValue:function(F){if(F==undefined){return""}var G="";A(E.data).each(function(I,J){var K=J[B.valueField];var H=J[B.textField];if(F==K){G+=H+B.split}});if(G.length>0){G=G.substr(0,G.length-1)}return G},findValueByText:function(G){if(!G&&G==""){return""}var F="";A(E.data).each(function(I,J){var K=J[B.valueField];var H=J[B.textField];if(G==H){F+=K+B.split}});if(F.length>0){F=F.substr(0,F.length-1)}return F},removeItem:function(){},insertItem:function(){},addItem:function(){},bulidContent:function(){this.clearContent();if(E.select){E.setSelect()}else{if(E.data){E.setData(E.data)}else{if(B.tree){E.setTree(B.tree)}else{if(B.grid){E.setGrid(B.grid)}}}}},clearContent:function(){A("table",E.selectBox).html("");E.inputText.val("");E.valueField.val("")},setSelect:function(){this.clearContent();A("option",E.select).each(function(H){var I=A(this).val();var F=A(this).html();var G=A("<tr><td index='"+H+"' value='"+I+"'>"+F+"</td>");A("table.l-table-nocheckbox",E.selectBox).append(G);A("td",G).hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")})});A("td:eq("+E.select[0].selectedIndex+")",E.selectBox).each(function(){if(A(this).hasClass("l-selected")){E.selectBox.hide();return}A(".l-selected",E.selectBox).removeClass("l-selected");A(this).addClass("l-selected");if(E.select[0].selectedIndex!=A(this).attr("index")&&E.select[0].onchange){E.select[0].selectedIndex=A(this).attr("index");E.select[0].onchange()}var F=parseInt(A(this).attr("index"));E.select[0].selectedIndex=F;E.select.trigger("change");E.selectBox.hide();E.inputText.val(A(this).html())});D.addClickEven()},setData:function(L){this.clearContent();if(B.columns){E.selectBox.table.headrow=A("<tr class='l-table-headerow'><td width='18px'></td></tr>");E.selectBox.table.append(E.selectBox.table.headrow);E.selectBox.table.addClass("l-box-select-grid");for(var J=0;J<B.columns.length;J++){var I=A("<td columnindex='"+J+"' columnname='"+B.columns[J].name+"'>"+B.columns[J].header+"</td>");if(B.columns[J].width){I.width(B.columns[J].width)}E.selectBox.table.headrow.append(I)}}for(var F=0;F<L.length;F++){var K=L[F][B.valueField];var G=L[F][B.textField];if(!B.columns){A("table.l-table-checkbox",E.selectBox).append("<tr><td style='width:18px;'  index='"+F+"' value='"+K+"' text='"+G+"' ><input type='checkbox' /></td><td index='"+F+"' value='"+K+"' align='left'>"+G+"</td>");A("table.l-table-nocheckbox",E.selectBox).append("<tr><td index='"+F+"' value='"+K+"' align='left'>"+G+"</td>")}else{var H=A("<tr><td style='width:18px;'  index='"+F+"' value='"+K+"' text='"+G+"' ><input type='checkbox' /></td></tr>");A("td",E.selectBox.table.headrow).each(function(){var N=A(this).attr("columnname");if(N){var M=A("<td>"+L[F][N]+"</td>");H.append(M)}});E.selectBox.table.append(H)}}if(B.isShowCheckBox&&A.fn.ligerCheckBox){A("table input:checkbox",E.selectBox).ligerCheckBox()}A(".l-table-checkbox input:checkbox",E.selectBox).change(function(){if(this.checked&&B.onBeforeSelect){var M=null;if(A(this).parent().get(0).tagName.toLowerCase()=="div"){M=A(this).parent().parent()}else{M=A(this).parent()}if(M!=null&&!B.onBeforeSelect(M.attr("value"),M.attr("text"))){E.selectBox.slideToggle("fast");return false}}if(!B.isMultiSelect){if(this.checked){A("input:checked",E.selectBox).not(this).each(function(){this.checked=false;A(".l-checkbox-checked",A(this).parent()).removeClass("l-checkbox-checked")});E.selectBox.slideToggle("fast")}}D.checkboxUpdateValue()});A("table.l-table-nocheckbox td",E.selectBox).hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")});D.addClickEven();D.dataInit()},setTree:function(F){this.clearContent();E.selectBox.table.remove();if(F.checkbox!=false){F.onCheck=function(){var H=E.treeManager.getChecked();var G=[];var I=[];A(H).each(function(J,K){if(B.treeLeafOnly&&K.data.children){return}G.push(K.data[B.valueField]);I.push(K.data[B.textField])});D.changeValue(G.join(B.split),I.join(B.split))}}else{F.onSelect=function(I){if(B.treeLeafOnly&&I.data.children){return}var G=I.data[B.valueField];var H=I.data[B.textField];D.changeValue(G,H)};F.onCancelSelect=function(G){D.changeValue("","")}}E.tree=A("<ul></ul>");A("div:first",E.selectBox).append(E.tree);E.tree.ligerTree(F);E.treeManager=E.tree.ligerGetTreeManager()},setGrid:function(F){this.clearContent();E.selectBox.table.remove();E.grid=A("div:first",E.selectBox);if(F.checkbox!=false){F.onCheckAllRow=F.onCheckRow=function(){var H=E.gridManager.getCheckedRows();var G=[];var I=[];A(H).each(function(K,J){G.push(J[B.valueField]);I.push(J[B.textField])});D.changeValue(G.join(B.split),I.join(B.split))}}else{F.onSelectRow=function(I,H,J){var G=I[B.valueField];var K=I[B.textField];D.changeValue(G,K)};F.onUnSelectRow=function(H,G,I){D.changeValue("","")}}F.width="100%";F.height="100%";F.heightDiff=-2;F.InWindow=false;E.grid.ligerGrid(F);E.gridManager=E.grid.ligerGetGridManager();B.hideOnLoseFocus=false;D.onEndResize=function(){E.gridManager&&E.gridManager.setHeight(E.selectBox.height()-2)}},data:B.data,inputText:null,select:null,textFieldID:"",valueFieldID:"",valueField:null};var D={dataInit:function(){var F=null;if(B.initValue!=undefined){F=B.initValue;var G=E.findTextByValue(F);D.changeValue(F,G)}else{if(B.initText!=undefined){F=E.findValueByText(B.initText);D.changeValue(F,B.initText)}}if(!B.isShowCheckBox&&F!=null){A("table tr",E.selectBox).find("td:first").each(function(){if(F==A(this).attr("value")){A(this).addClass("l-selected")}})}if(B.isShowCheckBox&&F!=null){A(":checkbox",E.selectBox).each(function(){var I=null;if(A(this).parent().get(0).tagName.toLowerCase()=="div"){I=A(this).parent().parent()}else{I=A(this).parent()}if(I==null){return}var H=F.toString().split(B.split);A(H).each(function(J,K){if(K==I.attr("value")){A(".l-checkbox",I).addClass("l-checkbox-checked")}})})}},changeValue:function(G,F){E.valueField.val(G);E.inputText.val(F);E.selectedValue=G;E.selectedText=F;if(B.onSelected){B.onSelected(G,F)}},checkboxUpdateValue:function(){var G="";var F="";A("input:checked",E.selectBox).each(function(){var H=null;if(A(this).parent().get(0).tagName.toLowerCase()=="div"){H=A(this).parent().parent()}else{H=A(this).parent()}if(!H){return}G+=H.attr("value")+B.split;F+=H.attr("text")+B.split});if(G.length>0){G=G.substr(0,G.length-1)}if(F.length>0){F=F.substr(0,F.length-1)}D.changeValue(G,F)},addClickEven:function(){A(".l-table-nocheckbox td",E.selectBox).click(function(){if(B.onBeforeSelect&&!B.onBeforeSelect(A(this).attr("value"),A(this).html())){E.selectBox.slideToggle("fast");return false}if(A(this).hasClass("l-selected")){E.selectBox.slideToggle("fast");return}A(".l-selected",E.selectBox).removeClass("l-selected");A(this).addClass("l-selected");if(E.select){if(E.select[0].selectedIndex!=A(this).attr("index")){var F=parseInt(A(this).attr("index"));E.select[0].selectedIndex=F;E.select.trigger("change")}}E.boxToggling=true;E.selectBox.hide("fast",function(){E.boxToggling=false});D.changeValue(A(this).attr("value"),A(this).html())})},toggleSelectBox:function(I){var H=E.wrapper.height();E.boxToggling=true;if(I){if(B.slide){E.selectBox.slideToggle("fast",function(){E.boxToggling=false})}else{E.selectBox.hide();E.boxToggling=false}}else{var F=E.wrapper.offset().top-A(window).scrollTop();var G=E.selectBox.height()+H+4;if(F+G>A(window).height()&&F>G){E.selectBox.css("marginTop",-1*(E.selectBox.height()+H+5))}if(B.slide){E.selectBox.slideToggle("fast",function(){E.boxToggling=false;if(!B.isShowCheckBox){var K=(A("td.l-selected",E.selectBox).offset().top-E.selectBox.offset().top);A(".l-box-select-inner",E.selectBox).animate({scrollTop:K})}})}else{E.selectBox.show();E.boxToggling=false;if(!E.tree&&!E.grid&&!B.isShowCheckBox){var J=(A("td.l-selected",E.selectBox).offset().top-E.selectBox.offset().top);A(".l-box-select-inner",E.selectBox).animate({scrollTop:J})}}}E.isShowed=E.selectBox.is(":visible")}};if(this.tagName.toLowerCase()=="input"){this.readOnly=true;E.inputText=A(this);E.textFieldID=this.id}else{if(this.tagName.toLowerCase()=="select"){A(this).addClass("l-hidden");E.select=A(this);B.isMultiSelect=false;B.isShowCheckBox=false;E.textFieldID=this.id+"_txt";E.inputText=A('<input type="text" readonly="true"/>');E.inputText.attr("id",E.textFieldID).insertAfter(A(this))}else{return}}if(E.inputText[0].name==undefined){E.inputText[0].name=E.textFieldID}E.valueField=null;if(B.valueFieldID){E.valueField=A("#"+B.valueFieldID+":input");if(E.valueField.length==0){E.valueField=A('<input type="hidden"/>')}E.valueField[0].id=E.valueField[0].name=B.valueFieldID}else{E.valueField=A('<input type="hidden"/>');E.valueField[0].id=E.valueField[0].name=E.textFieldID+"_val"}if(E.valueField[0].name==undefined){E.valueField[0].name=E.valueField[0].id}E.link=A('<div class="l-trigger"><div class="l-trigger-icon"></div></div>');E.selectBox=A('<div class="l-box-select"><div class="l-box-select-inner"><table cellpadding="0" cellspacing="0" border="0" class="l-box-select-table"></table></div></div>');E.selectBox.table=A("table:first",E.selectBox);E.wrapper=E.inputText.wrap('<div class="l-text"></div>').parent();E.wrapper.append(E.link).after(E.selectBox).after(E.valueField);if(!E.inputText.hasClass("l-text-field")){E.inputText.addClass("l-text-field")}if(B.width){E.wrapper.css({width:B.width});E.inputText.css({width:B.width-20})}if(B.height){E.wrapper.height(B.height);E.inputText.height(B.height-2);E.link.height(B.height-4)}if(B.isShowCheckBox&&!E.select){A("table",E.selectBox).addClass("l-table-checkbox")}else{B.isShowCheckBox=false;A("table",E.selectBox).addClass("l-table-nocheckbox")}if(B.resize&&A.fn.ligerResizable){E.selectBox.ligerResizable({handles:"se,s",onStartResize:function(){E.resizing=true;B.onStartResize&&onStartResize()},onEndResize:function(){E.resizing=false;D.onEndResize&&D.onEndResize();B.onEndResize&&B.onEndResize()}});E.selectBox.append("<div class='l-btn-nw-drop'></div>")}E.link.hover(function(){this.className="l-trigger-hover"},function(){this.className="l-trigger"}).mousedown(function(){this.className="l-trigger-pressed"}).mouseup(function(){this.className="l-trigger-hover"}).click(function(){D.toggleSelectBox(E.selectBox.is(":visible"))});E.inputText.click(function(){D.toggleSelectBox(E.selectBox.is(":visible"))});E.resizing=false;E.selectBox.hover(null,function(F){if(B.hideOnLoseFocus&&E.selectBox.is(":visible")&&!E.boxToggling&&!E.resizing){D.toggleSelectBox(true)}});if(B.selectBoxWidth){E.selectBox.width(B.selectBoxWidth)}else{E.selectBox.css("width",E.wrapper.css("width"))}var C=A("tr",E.selectBox.table).length;if(!B.selectBoxHeight&&C<8){B.selectBoxHeight=C*30}if(B.selectBoxHeight){E.selectBox.height(B.selectBoxHeight)}E.bulidContent();if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_ComboBox"]=E;this.usedComboBox=true})}})(jQuery);(function(A){A.fn.ligerDateEditor=function(B){B=B||{};B=A.extend({dayMessage:["日","一","二","三","四","五","六"],monthMessage:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],todayMessage:"今天",closeMessage:"关闭",format:"yyyy-MM-dd hh:mm",showTime:false,onChangeDate:false},B);if(!B.showTime&&B.format.indexOf(" hh:mm")>-1){B.format=B.format.replace(" hh:mm","")}return this.each(function(){if(this.useDateEditor){return}if(this.tagName.toLowerCase()!="input"||this.type!="text"){return}var E={bulidContent:function(){var H=new Date(E.currentDate.year,E.currentDate.month-1,1).getDay();var F=E.currentDate.month;var G=E.currentDate.year;if(++F==13){F=1;G++}var I=new Date(G,F-1,0).getDate();var J=new Date(E.currentDate.year,E.currentDate.month-1,0).getDate();E.buttons.btnMonth.html(B.monthMessage[E.currentDate.month-1]);E.buttons.btnYear.html(E.currentDate.year);E.toolbar.time.hour.html(E.currentDate.hour);E.toolbar.time.minute.html(E.currentDate.minute);if(E.toolbar.time.hour.html().length==1){E.toolbar.time.hour.html("0"+E.toolbar.time.hour.html())}if(E.toolbar.time.minute.html().length==1){E.toolbar.time.minute.html("0"+E.toolbar.time.minute.html())}A("td",this.body.tbody).each(function(){this.className=""});A("tr",this.body.tbody).each(function(L,K){A("td",K).each(function(P,N){var M=L*7+(P-H);var O=M+1;if(E.selectedDate&&E.currentDate.year==E.selectedDate.year&&E.currentDate.month==E.selectedDate.month&&M+1==E.selectedDate.date){if(P==0||P==6){A(N).addClass("l-box-dateeditor-holiday")}A(N).addClass("l-box-dateeditor-selected");A(N).siblings().removeClass("l-box-dateeditor-selected")}else{if(E.currentDate.year==E.now.year&&E.currentDate.month==E.now.month&&M+1==E.now.date){if(P==0||P==6){A(N).addClass("l-box-dateeditor-holiday")}A(N).addClass("l-box-dateeditor-today")}else{if(M<0){O=J+O;A(N).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")}else{if(M>I-1){O=O-I;A(N).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")}else{if(P==0||P==6){A(N).addClass("l-box-dateeditor-holiday").removeClass("l-box-dateeditor-selected")}else{N.className=""}}}}}A(N).html(O)})})},toggleDateEditor:function(G){var F=E.text.height();E.editorToggling=true;if(G){E.dateeditor.hide("fast",function(){E.editorToggling=false})}else{if(E.text.offset().top+4>E.dateeditor.height()&&E.text.offset().top+E.dateeditor.height()+F+4-A(window).scrollTop()>A(window).height()){E.dateeditor.css("marginTop",-1*(E.dateeditor.height()+F+5));E.showOnTop=true}else{E.showOnTop=false}E.dateeditor.slideDown("fast",function(){E.editorToggling=false})}},showDate:function(){if(!this.selectedDate){return}var F=E.selectedDate.year+"/"+E.selectedDate.month+"/"+E.selectedDate.date;this.currentDate.hour=parseInt(E.toolbar.time.hour.html());this.currentDate.minute=parseInt(E.toolbar.time.minute.html());if(B.showTime){F+=" "+this.currentDate.hour+":"+this.currentDate.minute}this.inputText.val(F);this.inputText.trigger("change")},isDateTime:function(G){var F=G.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(F==null){return false}var H=new Date(F[1],F[3]-1,F[4]);if(H=="NaN"){return false}return(H.getFullYear()==F[1]&&(H.getMonth()+1)==F[3]&&H.getDate()==F[4])},isLongDateTime:function(H){var G=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/;var F=H.match(G);if(F==null){return false}var I=new Date(F[1],F[3]-1,F[4],F[5],F[6]);if(I=="NaN"){return false}return(I.getFullYear()==F[1]&&(I.getMonth()+1)==F[3]&&I.getDate()==F[4]&&I.getHours()==F[5]&&I.getMinutes()==F[6])},getFormatDate:function(H){if(H=="NaN"){return null}var G=B.format;var I={"M+":H.getMonth()+1,"d+":H.getDate(),"h+":H.getHours(),"m+":H.getMinutes(),"s+":H.getSeconds(),"q+":Math.floor((H.getMonth()+3)/3),"S":H.getMilliseconds()};if(/(y+)/.test(G)){G=G.replace(RegExp.$1,(H.getFullYear()+"").substr(4-RegExp.$1.length))}for(var F in I){if(new RegExp("("+F+")").test(G)){G=G.replace(RegExp.$1,RegExp.$1.length==1?I[F]:("00"+I[F]).substr((""+I[F]).length))}}return G},onTextChange:function(){var G=E.inputText.val();if(!B.showTime&&!E.isDateTime(G)){if(!E.usedDate){E.inputText.val("")}else{E.inputText.val(E.getFormatDate(E.usedDate))}}else{if(B.showTime&&!E.isLongDateTime(G)){if(!E.usedDate){E.inputText.val("")}else{E.inputText.val(E.getFormatDate(E.usedDate))}}else{while(G.indexOf("-")>-1){G=G.replace("-","/")}var F=E.getFormatDate(new Date(G));if(F==null){if(!E.usedDate){E.inputText.val("")}else{E.inputText.val(E.getFormatDate(E.usedDate))}}E.usedDate=new Date(G);E.selectedDate={year:E.usedDate.getFullYear(),month:E.usedDate.getMonth()+1,day:E.usedDate.getDay(),date:E.usedDate.getDate(),hour:E.usedDate.getHours(),minute:E.usedDate.getMinutes()};E.currentDate={year:E.usedDate.getFullYear(),month:E.usedDate.getMonth()+1,day:E.usedDate.getDay(),date:E.usedDate.getDate(),hour:E.usedDate.getHours(),minute:E.usedDate.getMinutes()};E.inputText.val(F);if(B.onChangeDate){B.onChangeDate(F)}if(A(E.dateeditor).is(":visible")){E.bulidContent()}}}}};E.inputText=A(this);if(!E.inputText.hasClass("l-text-field")){E.inputText.addClass("l-text-field")}E.link=A('<div class="l-trigger"><div class="l-trigger-icon"></div></div>');E.text=E.inputText.wrap('<div class="l-text"></div>').parent();E.text.append(E.link);if(B.width){E.text.css({width:B.width});E.inputText.css({width:B.width-20})}var C="";C+="<div class='l-box-dateeditor' style='display:none'>";C+="    <div class='l-box-dateeditor-header'>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevyear'><span></span></div>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevmonth'><span></span></div>";C+="        <div class='l-box-dateeditor-header-text'><a class='l-box-dateeditor-header-month'></a> , <a  class='l-box-dateeditor-header-year'></a></div>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextmonth'><span></span></div>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextyear'><span></span></div>";C+="    </div>";C+="    <div class='l-box-dateeditor-body'>";C+="        <table cellpadding='0' cellspacing='0' border='0' class='l-box-dateeditor-calendar'>";C+="            <thead>";C+="                <tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>";C+="            </thead>";C+="            <tbody>";C+="                <tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>";C+="            </tbody>";C+="        </table>";C+="        <ul class='l-box-dateeditor-monthselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="        <ul class='l-box-dateeditor-yearselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="        <ul class='l-box-dateeditor-hourselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="        <ul class='l-box-dateeditor-minuteselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="    </div>";C+="    <div class='l-box-dateeditor-toolbar'>";C+="        <div class='l-box-dateeditor-time'></div>";C+="        <div class='l-button l-button-today'></div>";C+="        <div class='l-button l-button-close'></div>";C+="        <div class='l-clear'></div>";C+="    </div>";C+="</div>";E.dateeditor=A(C);E.text.after(E.dateeditor);E.header=A(".l-box-dateeditor-header",E.dateeditor);E.body=A(".l-box-dateeditor-body",E.dateeditor);E.toolbar=A(".l-box-dateeditor-toolbar",E.dateeditor);E.body.thead=A("thead",E.body);E.body.tbody=A("tbody",E.body);E.body.monthselector=A(".l-box-dateeditor-monthselector",E.body);E.body.yearselector=A(".l-box-dateeditor-yearselector",E.body);E.body.hourselector=A(".l-box-dateeditor-hourselector",E.body);E.body.minuteselector=A(".l-box-dateeditor-minuteselector",E.body);E.toolbar.time=A(".l-box-dateeditor-time",E.toolbar);E.toolbar.time.hour=A("<a></a>");E.toolbar.time.minute=A("<a></a>");E.buttons={btnPrevYear:A(".l-box-dateeditor-header-prevyear",E.header),btnNextYear:A(".l-box-dateeditor-header-nextyear",E.header),btnPrevMonth:A(".l-box-dateeditor-header-prevmonth",E.header),btnNextMonth:A(".l-box-dateeditor-header-nextmonth",E.header),btnYear:A(".l-box-dateeditor-header-year",E.header),btnMonth:A(".l-box-dateeditor-header-month",E.header),btnToday:A(".l-button-today",E.toolbar),btnClose:A(".l-button-close",E.toolbar)};var D=new Date();E.now={year:D.getFullYear(),month:D.getMonth()+1,day:D.getDay(),date:D.getDate(),hour:D.getHours(),minute:D.getMinutes()};E.currentDate={year:D.getFullYear(),month:D.getMonth()+1,day:D.getDay(),date:D.getDate(),hour:D.getHours(),minute:D.getMinutes()};E.selectedDate=null;E.usedDate=null;A("td",E.body.thead).each(function(G,F){A(F).html(B.dayMessage[G])});A("li",E.body.monthselector).each(function(G,F){A(F).html(B.monthMessage[G])});E.buttons.btnToday.html(B.todayMessage);E.buttons.btnClose.html(B.closeMessage);if(B.showTime){E.toolbar.time.show();E.toolbar.time.append(E.toolbar.time.hour).append(":").append(E.toolbar.time.minute);A("li",E.body.hourselector).each(function(G,H){var F=G;if(G<10){F="0"+G.toString()}A(this).html(F)});A("li",E.body.minuteselector).each(function(G,H){var F=G;if(G<10){F="0"+G.toString()}A(this).html(F)})}E.bulidContent();E.onTextChange();E.dateeditor.hover(null,function(F){if(E.dateeditor.is(":visible")&&!E.editorToggling){E.toggleDateEditor(true)}});E.link.hover(function(){this.className="l-trigger-hover"},function(){this.className="l-trigger"}).mousedown(function(){this.className="l-trigger-pressed"}).mouseup(function(){this.className="l-trigger-hover"}).click(function(){E.bulidContent();E.toggleDateEditor(E.dateeditor.is(":visible"))});E.buttons.btnClose.click(function(){E.toggleDateEditor(true)});A("td",E.body.tbody).hover(function(){if(A(this).hasClass("l-box-dateeditor-today")){return}A(this).addClass("l-box-dateeditor-over")},function(){A(this).removeClass("l-box-dateeditor-over")}).click(function(){A(".l-box-dateeditor-selected",E.body.tbody).removeClass("l-box-dateeditor-selected");if(!A(this).hasClass("l-box-dateeditor-today")){A(this).addClass("l-box-dateeditor-selected")}E.currentDate.date=parseInt(A(this).html());E.currentDate.day=new Date(E.currentDate.year,E.currentDate.month-1,1).getDay();if(A(this).hasClass("l-box-dateeditor-out")){if(A("tr",E.body.tbody).index(A(this).parent())==0){if(--E.currentDate.month==0){E.currentDate.month=12;E.currentDate.year--}}else{if(++E.currentDate.month==13){E.currentDate.month=1;E.currentDate.year++}}}E.selectedDate={year:E.currentDate.year,month:E.currentDate.month,date:E.currentDate.date};E.showDate();E.editorToggling=true;E.dateeditor.slideToggle("fast",function(){E.editorToggling=false})});A(".l-box-dateeditor-header-btn",E.header).hover(function(){A(this).addClass("l-box-dateeditor-header-btn-over")},function(){A(this).removeClass("l-box-dateeditor-header-btn-over")});E.buttons.btnYear.click(function(){if(!E.body.yearselector.is(":visible")){A("li",E.body.yearselector).each(function(F,G){var H=E.currentDate.year+(F-4);if(H==E.currentDate.year){A(this).addClass("l-selected")}else{A(this).removeClass("l-selected")}A(this).html(H)})}E.body.yearselector.slideToggle()});E.body.yearselector.hover(function(){},function(){A(this).slideUp()});A("li",E.body.yearselector).click(function(){E.currentDate.year=parseInt(A(this).html());E.body.yearselector.slideToggle();E.bulidContent()});E.buttons.btnMonth.click(function(){A("li",E.body.monthselector).each(function(F,G){if(E.currentDate.month==F+1){A(this).addClass("l-selected")}else{A(this).removeClass("l-selected")}});E.body.monthselector.slideToggle()});E.body.monthselector.hover(function(){},function(){A(this).slideUp("fast")});A("li",E.body.monthselector).click(function(){var F=A("li",E.body.monthselector).index(this);E.currentDate.month=F+1;E.body.monthselector.slideToggle();E.bulidContent()});E.toolbar.time.hour.click(function(){A("li",E.body.hourselector).each(function(F,G){if(E.currentDate.hour==F){A(this).addClass("l-selected")}else{A(this).removeClass("l-selected")}});E.body.hourselector.slideToggle()});E.body.hourselector.hover(function(){},function(){A(this).slideUp("fast")});A("li",E.body.hourselector).click(function(){var F=A("li",E.body.hourselector).index(this);E.currentDate.hour=F;E.body.hourselector.slideToggle();E.bulidContent()});E.toolbar.time.minute.click(function(){A("li",E.body.minuteselector).each(function(F,G){if(E.currentDate.minute==F){A(this).addClass("l-selected")}else{A(this).removeClass("l-selected")}});E.body.minuteselector.slideToggle("fast",function(){var F=A("li",this).index(A("li.l-selected",this));if(F>29){var G=(A("li.l-selected",this).offset().top-A(this).offset().top);A(this).animate({scrollTop:G})}})});E.body.minuteselector.hover(function(){},function(){A(this).slideUp("fast")});A("li",E.body.minuteselector).click(function(){var F=A("li",E.body.minuteselector).index(this);E.currentDate.minute=F;E.body.minuteselector.slideToggle("fast");E.bulidContent()});E.buttons.btnPrevMonth.click(function(){if(--E.currentDate.month==0){E.currentDate.month=12;E.currentDate.year--}E.bulidContent()});E.buttons.btnNextMonth.click(function(){if(++E.currentDate.month==13){E.currentDate.month=1;E.currentDate.year++}E.bulidContent()});E.buttons.btnPrevYear.click(function(){E.currentDate.year--;E.bulidContent()});E.buttons.btnNextYear.click(function(){E.currentDate.year++;E.bulidContent()});E.buttons.btnToday.click(function(){E.currentDate={year:E.now.year,month:E.now.month,day:E.now.day,date:E.now.date};E.selectedDate={year:E.now.year,month:E.now.month,day:E.now.day,date:E.now.date};E.showDate();E.dateeditor.slideToggle("fast")});E.inputText.change(function(){E.onTextChange()});this.useDateEditor=true})}})(jQuery);var ligerDialogImagePath="../../lib/ligerUI/skins/Aqua/images/dialog/";(function(A){A.ligerDefaults=A.ligerDefaults||{};A.ligerDefaults.Dialog={cls:null,id:null,buttons:null,isDrag:true,width:280,height:null,titleMessage:"提示",waittingMessage:"正在等待中,请稍候...",content:"",target:null,url:null,load:false,type:"warn",left:null,top:null,modal:true,name:null,isResize:false,allowClose:true};A.ligerDialog={};A.ligerDialog.open=function(F){F=A.extend({},A.ligerDefaults.Dialog,F||{});var I={applyWindowMask:function(){A(".l-window-mask").remove();A("<div class='l-window-mask' style='display: block;'></div>").height(A(window).height()+A(window).scrollTop()).appendTo("body")},removeWindowMask:function(){A(".l-window-mask").remove()},applyDrag:function(){if(A.fn.ligerDrag){I.dialog.ligerDrag({handler:".l-dialog-title"})}},applyResize:function(){if(A.fn.ligerResizable){I.dialog.ligerResizable({onStopResize:function(K,N){var L=0;var M=0;if(!isNaN(parseInt(I.dialog.css("top")))){L=parseInt(I.dialog.css("top"))}if(!isNaN(parseInt(I.dialog.css("left")))){M=parseInt(I.dialog.css("left"))}if(K.diffTop!=undefined){I.dialog.css({top:L+K.diffTop,left:M+K.diffLeft});I.dialog.body.css({width:K.newWidth-26});A(".l-dialog-content",I.dialog.body).height(K.newHeight-46-A(".l-dialog-buttons",I.dialog).height())}return false}})}},setImage:function(){if(F.type){if(F.type=="success"||F.type=="donne"||F.type=="ok"){A(".l-dialog-image",I.dialog).addClass("l-dialog-image-donne").show();A(".l-dialog-content",I.dialog).css({paddingLeft:64,paddingBottom:30})}else{if(F.type=="error"){A(".l-dialog-image",I.dialog).addClass("l-dialog-image-error").show();A(".l-dialog-content",I.dialog).css({paddingLeft:64,paddingBottom:30})}else{if(F.type=="warn"){A(".l-dialog-image",I.dialog).addClass("l-dialog-image-warn").show();A(".l-dialog-content",I.dialog).css({paddingLeft:64,paddingBottom:30})}else{if(F.type=="question"){A(".l-dialog-image",I.dialog).addClass("l-dialog-image-question").show();A(".l-dialog-content",I.dialog).css({paddingLeft:64,paddingBottom:40})}}}}}}};I.dialog=A('<div class="l-dialog"><table class="l-dialog-table" cellpadding="0" cellspacing="0" border="0"><tbody><tr><td class="l-dialog-tl"></td><td class="l-dialog-tc"><div class="l-dialog-tc-inner"><div class="l-dialog-icon"></div><div class="l-dialog-title"></div><div class="l-dialog-close"></div></div></td><td class="l-dialog-tr"></td></tr><tr><td class="l-dialog-cl"></td><td class="l-dialog-cc"><div class="l-dialog-body"><div class="l-dialog-image"></div> <div class="l-dialog-content"></div><div class="l-dialog-buttons"><div class="l-dialog-buttons-inner"></div></td><td class="l-dialog-cr"></td></tr><tr><td class="l-dialog-bl"></td><td class="l-dialog-bc"></td><td class="l-dialog-br"></td></tr></tbody></table></div>');A("body").append(I.dialog);I.dialog.body=A(".l-dialog-body:first",I.dialog);I.dialog.close=function(){I.removeWindowMask();I.dialog.remove()};if(F.allowClose==false){A(".l-dialog-close",I.dialog).remove()}if(F.target||F.url||F.type=="none"){F.type=null}if(F.cls){I.dialog.addClass(F.cls)}if(F.id){I.dialog.attr("id",F.id)}if(F.modal){I.applyWindowMask()}if(F.isDrag){I.applyDrag()}if(F.isResize){I.applyResize()}if(F.type){I.setImage()}else{A(".l-dialog-image",I.dialog).remove();A(".l-dialog-content",I.dialog.body).addClass("l-dialog-content-noimage")}if(F.target){A(".l-dialog-content",I.dialog.body).prepend(F.target)}else{if(F.url){var J=A("<iframe frameborder='0' src='"+F.url+"'></iframe>");var G=F.name?F.name:"ligerwindow"+new Date().getTime();J.attr("name",G);A(".l-dialog-content",I.dialog.body).prepend(J);A(".l-dialog-content",I.dialog.body).addClass("l-dialog-content-nopadding")}else{if(F.content){A(".l-dialog-content",I.dialog.body).html(F.content)}}}if(F.buttons){A(F.buttons).each(function(K,L){var M=A('<div class="l-dialog-btn"><div class="l-dialog-btn-l"></div><div class="l-dialog-btn-r"></div><div class="l-dialog-btn-inner"></div></div>');A(".l-dialog-btn-inner",M).html(L.text);A(".l-dialog-buttons-inner",I.dialog.body).prepend(M);L.width&&M.width(L.width);L.onclick&&M.click(function(){L.onclick(L,I.dialog,K)})})}else{A(".l-dialog-buttons",I.dialog).remove()}A(".l-dialog-buttons-inner",I.dialog).append("<div class='l-clear'></div>");F.width&&I.dialog.body.width(F.width-26);if(F.height){A(".l-dialog-content",I.dialog.body).height(F.height-46-A(".l-dialog-buttons",I.dialog).height())}F.title=F.title||F.titleMessage;F.title&&A(".l-dialog-title",I.dialog).html(F.title);A(".l-dialog-title",I.dialog).bind("selectstart",function(){return false});A(".l-dialog-btn",I.dialog.body).hover(function(){A(this).addClass("l-dialog-btn-over")},function(){A(this).removeClass("l-dialog-btn-over")});A(".l-dialog-tc .l-dialog-close",I.dialog).hover(function(){A(this).addClass("l-dialog-close-over")},function(){A(this).removeClass("l-dialog-close-over")}).click(function(){I.dialog.close()});var B=(navigator.appName=="Microsoft Internet Explorer"&&parseInt(navigator.appVersion)==4&&navigator.appVersion.indexOf("MSIE 5.5")!=-1);var H=(navigator.appName=="Microsoft Internet Explorer"&&parseInt(navigator.appVersion)==4&&navigator.appVersion.indexOf("MSIE 6.0")!=-1);if(A.browser.msie&&(B||H)){A(".l-dialog-tl:first",I.dialog).css({"background":"none","filter":"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+ligerDialogImagePath+"dialog-tl.png',sizingMethod='crop');"});A(".l-dialog-tc:first",I.dialog).css({"background":"none","filter":"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+ligerDialogImagePath+"ie6/dialog-tc.png',sizingMethod='crop');"});A(".l-dialog-tr:first",I.dialog).css({"background":"none","filter":"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+ligerDialogImagePath+"dialog-tr.png',sizingMethod='crop');"});A(".l-dialog-cl:first",I.dialog).css({"background":"none","filter":"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+ligerDialogImagePath+"ie6/dialog-cl.png',sizingMethod='crop');"});A(".l-dialog-cr:first",I.dialog).css({"background":"none","filter":"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+ligerDialogImagePath+"ie6/dialog-cr.png',sizingMethod='crop');"});A(".l-dialog-bl:first",I.dialog).css({"background":"none","filter":"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+ligerDialogImagePath+"dialog-bl.png',sizingMethod='crop');"});A(".l-dialog-bc:first",I.dialog).css({"background":"none","filter":"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+ligerDialogImagePath+"ie6/dialog-bc.png',sizingMethod='crop');"});A(".l-dialog-br:first",I.dialog).css({"background":"none","filter":"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+ligerDialogImagePath+"dialog-br.png',sizingMethod='crop');"})}var E=0;var D=0;var C=F.width||I.dialog.width();if(F.left!=null){E=F.left}else{E=0.5*(A(window).width()-C)}if(F.top!=null){D=F.top}else{D=0.5*(A(window).height()-I.dialog.height())+A(window).scrollTop()}I.dialog.css({left:E,top:D}).show()};A.ligerDialog.close=function(){A(".l-dialog,.l-window-mask").remove()};A.ligerDialog.alert=function(B,E,C,F){B=B||"";if(typeof(E)=="function"){F=E;C=null}else{if(typeof(C)=="function"){F=C}}var D=function(H,G,I){G.close();if(F){F(H,G,I)}};p={content:B,buttons:[{text:"确定",onclick:D}]};if(typeof(E)=="string"&&E!=""){p.title=E}if(typeof(C)=="string"&&C!=""){p.type=C}A.ligerDialog.open(p)};A.ligerDialog.confirm=function(B,D,E){if(typeof(D)=="function"){E=D;type=null}var C=function(G,F){F.close();if(E){E(G.type=="ok")}};p={type:"question",content:B,buttons:[{text:"是",onclick:C,type:"ok"},{text:"否",onclick:C,type:"no"}]};if(typeof(D)=="string"&&D!=""){p.title=D}A.ligerDialog.open(p)};A.ligerDialog.warning=function(B,D,E){if(typeof(D)=="function"){E=D;type=null}var C=function(G,F){F.close();if(E){E(G.type)}};p={type:"question",content:B,buttons:[{text:"是",onclick:C,type:"yes"},{text:"否",onclick:C,type:"no"},{text:"取消",onclick:C,type:"cancel"}]};if(typeof(D)=="string"&&D!=""){p.title=D}A.ligerDialog.open(p)};A.ligerDialog.waitting=function(B){B=B||A.ligerDefaults.Dialog.waittingMessage;A.ligerDialog.open({cls:"l-dialog-waittingdialog",type:"none",content:'<div style="padding:4px">'+B+"</div>",allowClose:false})};A.ligerDialog.closeWaitting=function(){A(".l-dialog-waittingdialog,.l-window-mask").remove()};A.ligerDialog.success=function(B,D,C){A.ligerDialog.alert(B,D,"success",C)};A.ligerDialog.error=function(B,D,C){A.ligerDialog.alert(B,D,"error",C)};A.ligerDialog.warn=function(B,D,C){A.ligerDialog.alert(B,D,"warn",C)};A.ligerDialog.question=function(B,C){A.ligerDialog.alert(B,C,"question")};A.ligerDialog.prompt=function(C,B,E,G){var D=A('<input type="text" class="l-dialog-inputtext"/>');if(typeof(E)=="function"){G=E}if(typeof(B)=="function"){G=B}else{if(typeof(B)=="boolean"){E=B}}if(typeof(E)=="boolean"&&E){D=A('<textarea class="l-dialog-textarea"></textarea>')}if(typeof(B)=="string"||typeof(B)=="int"){D.val(B)}var F=function(I,H,J){H.close();if(G){G(I.type=="yes",D.val())}};p={title:C,target:D,width:320,buttons:[{text:"确定",onclick:F,type:"yes"},{text:"取消",onclick:F,type:"cancel"}]};A.ligerDialog.open(p)}})(jQuery);(function(A){A.ligerDefaults=A.ligerDefaults||{};A.ligerDefaults.Drag={onStartDrag:false,onDrag:false,onStopDrag:false};A.fn.ligerDrag=function(B){B=A.extend({},A.ligerDefaults.Drag,B||{});return this.each(function(){if(this.useDrag){return}var C={start:function(D){A("body").css("cursor","move");C.current={target:C.target,left:C.target.offset().left,top:C.target.offset().top,startX:D.pageX||D.screenX,startY:D.pageY||D.clientY};A(document).bind("mouseup.drag",C.stop);A(document).bind("mousemove.drag",C.drag);if(B.onStartDrag){B.onStartDrag(C.current,D)}},drag:function(E){if(!C.current){return}var F=E.pageX||E.screenX;var D=E.pageY||E.screenY;C.current.diffX=F-C.current.startX;C.current.diffY=D-C.current.startY;if(B.onDrag){if(B.onDrag(C.current,E)!=false){C.applyDrag()}}else{C.applyDrag()}},stop:function(D){A(document).unbind("mousemove.drag");A(document).unbind("mouseup.drag");A("body").css("cursor","");if(B.onStopDrag){B.onStopDrag(C.current,D)}C.current=null},applyDrag:function(){if(C.current.diffX){C.target.css("left",(C.current.left+C.current.diffX))}if(C.current.diffY){C.target.css("top",(C.current.top+C.current.diffY))}}};C.target=A(this);if(B.handler==undefined||B.handler==null){C.handler=A(this)}else{C.handler=(typeof B.handler=="string"?A(B.handler,this):B.handle)}C.handler.hover(function(){A("body").css("cursor","move")},function(){A("body").css("cursor","default")}).mousedown(function(D){C.start(D);return false});this.useDrag=true})}})(jQuery);(function(A){A.fn.ligerEasyTab=function(B){B=B||{};return this.each(function(){if(this.manager){return}if(A(this).hasClass("l-hidden")){return}var D={};this.manager=D;D.tabs=A(this);if(!D.tabs.hasClass("l-easytab")){D.tabs.addClass("l-easytab")}var C=0;if(A("> div[lselected=true]",D.tabs).length>0){C=A("> div",D.tabs).index(A("> div[lselected=true]",D.tabs))}D.tabs.ul=A('<ul class="l-easytab-header"></ul>');A("> div",D.tabs).each(function(G,F){var E=A("<li><span></span></li>");if(G==C){A("span",E).addClass("l-selected")}if(A(F).attr("title")){A("span",E).html(A(F).attr("title"))}D.tabs.ul.append(E);if(!A(F).hasClass("l-easytab-panelbox")){A(F).addClass("l-easytab-panelbox")}});D.tabs.ul.prependTo(D.tabs);A(".l-easytab-panelbox:eq("+C+")",D.tabs).show().siblings(".l-easytab-panelbox").hide();A("> ul:first span",D.tabs).click(function(){if(A(this).hasClass("l-selected")){return}var E=A("> ul:first span",D.tabs).index(this);A(this).addClass("l-selected").parent().siblings().find("span.l-selected").removeClass("l-selected");A(".l-easytab-panelbox:eq("+E+")",D.tabs).show().siblings(".l-easytab-panelbox").hide()}).not("l-selected").hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")})})}})(jQuery);(function(A){A.fn.ligerFrom=function(B){B=B||{};return this.each(function(){A(":text[ltype=text]",this).ligerTextBox();A("select",this).ligerComboBox();A(":text[ltype=int]",this).ligerSpinner({type:"int"});A(":text[ltype=date]",this).ligerDateEditor();A("input:radio",this).ligerRadio();A("input:checkbox",this).ligerCheckBox()})}})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function($){$.fn.ligerGetGridManager=function(){return LigerUIManagers[this[0].id+"_Grid"]};$.ligerDefaults=$.ligerDefaults||{};$.ligerDefaults.Grid={errorMessage:"发生错误",pageStatMessage:"显示记录从{from}到{to}，总数 {total} 条",pageTextMessage:"Page",loadingMessage:"加载中...",findTextMessage:"查找",noRecordMessage:"没有符合条件的记录存在",title:null,isContinueByDataChanged:"数据已经改变,如果继续将丢失数据,是否继续?",width:"auto",columnWidth:120,resizable:true,url:false,usePager:true,page:1,total:1,pageSize:10,pageSizeOptions:[10,20,30,40,50],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTableToggleBtn:false,switchPageSizeApplyComboBox:true,allowAdjustColWidth:true,checkbox:false,showToggleColBtn:true,enabledEdit:false,isScroll:true,onDragCol:null,onToggleCol:null,onChangeSort:null,onSuccess:null,onDblClickRow:null,onSelectRow:null,onUnSelectRow:null,onBeforeCheckRow:null,onCheckRow:null,onBeforeCheckAllRow:null,onCheckAllRow:null,onBeforeShowData:null,onAfterShowData:null,onError:null,onSubmit:null,dateFormat:"yyyy-MM-dd",InWindow:true,statusName:"__status",method:"post",fixedCellHeight:true,heightDiff:0,cssClass:null,renderDate:function(value){var da;if(!value){return null}if(typeof value=="object"){return value}if(value.indexOf("Date")>-1){da=eval("new "+value.replace("/","","g").replace("/","","g"))}else{da=eval('new Date("'+value+'");')}return da}};$.ligerAddGrid=function(grid,p){if(grid.usedGrid){return}$(grid).hasClass("l-panel")||$(grid).addClass("l-panel");var gridhtmlarr=[];gridhtmlarr.push("        <div class='l-panel-header'><span class='l-panel-header-text'></span></div>");gridhtmlarr.push("                    <div class='l-grid-loading'></div>");gridhtmlarr.push("                    <div class='l-grid-editor'></div>");gridhtmlarr.push("        <div class='l-panel-bwarp'>");gridhtmlarr.push("            <div class='l-panel-body'>");gridhtmlarr.push("                <div class='l-grid'>");gridhtmlarr.push("                    <div class='l-grid-dragging-line'></div>");gridhtmlarr.push("                    <div class='l-grid-popup'><table cellpadding='0' cellspacing='0'><tbody></tbody></table></div>");gridhtmlarr.push("                    <div class='l-grid-header'>");gridhtmlarr.push("                        <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody><tr></tr></tbody></table></div>");gridhtmlarr.push("                    </div>");gridhtmlarr.push("                    <div class='l-grid-body l-scroll'>");gridhtmlarr.push("                    </div>");gridhtmlarr.push("                 </div>");gridhtmlarr.push("              </div>");gridhtmlarr.push("         </div>");gridhtmlarr.push("         <div class='l-panel-bar'>");gridhtmlarr.push("            <div class='l-panel-bbar-inner'>");gridhtmlarr.push("            <div class='l-bar-group l-bar-selectpagesize'></div>");gridhtmlarr.push("                <div class='l-bar-separator'></div>");gridhtmlarr.push("                <div class='l-bar-group'>");gridhtmlarr.push("                    <div class='l-bar-button l-bar-btnfirst'><span></span></div>");gridhtmlarr.push("                    <div class='l-bar-button l-bar-btnprev'><span></span></div>");gridhtmlarr.push("                </div>");gridhtmlarr.push("                <div class='l-bar-separator'></div>");gridhtmlarr.push("                <div class='l-bar-group'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span></span></span></div>");gridhtmlarr.push("                <div class='l-bar-separator'></div>");gridhtmlarr.push("                <div class='l-bar-group'>");gridhtmlarr.push("                     <div class='l-bar-button l-bar-btnnext'><span></span></div>");gridhtmlarr.push("                    <div class='l-bar-button l-bar-btnlast'><span></span></div>");gridhtmlarr.push("                </div>");gridhtmlarr.push("                <div class='l-bar-separator'></div>");gridhtmlarr.push("                <div class='l-bar-group'>");gridhtmlarr.push("                     <div class='l-bar-button l-bar-btnload'><span></span></div>");gridhtmlarr.push("                </div>");gridhtmlarr.push("                <div class='l-bar-separator'></div>");gridhtmlarr.push("                <div class='l-bar-group l-bar-right'><span class='l-bar-text'></span></div>");gridhtmlarr.push("                <div class='l-clear'></div>");gridhtmlarr.push("            </div>");gridhtmlarr.push("         </div>");$(grid).html(gridhtmlarr.join(""));var g={loadData:function(loadService){if(!p.newPage){p.newPage=1}if(p.dataAction=="server"){if(!p.sortOrder){p.sortOrder="asc"}}var param=[];if(p.parms&&p.parms.length){$(p.parms).each(function(){param.push({name:this.name,value:this.value})})}if(p.dataAction=="server"){if(p.usePager){param.push({name:"page",value:p.newPage});param.push({name:"pagesize",value:p.pageSize})}if(p.sortName){param.push({name:"sortname",value:p.sortName});param.push({name:"sortorder",value:p.sortOrder})}}g.gridloading.show();$(".l-bar-btnload span",g.toolbar).addClass("l-disabled");this.loading=true;if(p.dataType=="local"){if(!g.data){g.data=$.extend({},p.data)}if(p.usePager){g.currentData=g.getCurrentPageData(g.data)}else{g.currentData=$.extend({},g.data)}g.showData(g.currentData)}else{if(p.dataAction=="local"&&g.data&&!loadService){g.currentData=g.getCurrentPageData(g.data);g.showData(g.currentData)}else{$.ajax({type:p.method,url:p.url,data:param,dataType:"json",success:function(data){g.data=$.extend({},data);if(p.dataAction=="server"){g.currentData=g.data;g.showData(g.currentData)}else{g.currentData=g.getCurrentPageData(g.data);g.showData(g.currentData)}},error:function(XMLHttpRequest,textStatus,errorThrown){g.gridloading.hide();$(".l-bar-btnload span",g.toolbar).removeClass("l-disabled");try{if(p.onError){p.onError(XMLHttpRequest,textStatus,errorThrown)}}catch(e){}}})}}},setOptions:function(parms){$.extend(p,parms)},showData:function(data){if(p.onBeforeShowData&&p.onBeforeShowData(grid,data)==false){return false}g.isDataChanged=false;$(".l-bar-btnloading:first",this.toolbar).removeClass("l-bar-btnloading");g.gridloading.hide();$(".l-bar-btnload:first span",g.toolbar).removeClass("l-disabled");this.loading=false;if(p.usePager){p.total=data.Total;p.page=p.newPage;p.pageCount=Math.ceil(p.total/p.pageSize);this.buildPager()}g.gridbody.html("");var gridhtmlarr=['<div class="l-grid-body-inner"><table class="l-grid-body-table" cellpadding=0 cellspacing=0><tbody>'];var rowlenth=data.Rows.length;$(data.Rows).each(function(i,item){if(!item){return}if(!p.usePager&&i==rowlenth-1&&!g.isTotalSummary()){gridhtmlarr.push('<tr class="l-grid-row l-grid-row-last')}else{gridhtmlarr.push('<tr class="l-grid-row')}if(i%2==1){gridhtmlarr.push(" l-grid-row-alt")}gridhtmlarr.push('" rowindex="'+i+'">');$(g.headers).each(function(headerCellIndex,headerInfor){if(this.ischeckbox){gridhtmlarr.push('<td class="l-grid-row-cell l-grid-row-cell-checkbox" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"><span class="l-grid-row-cell-btn-checkbox"></span></div></td>');return}else{if(this.isdetail){gridhtmlarr.push('<td class="l-grid-row-cell l-grid-row-cell-detail" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"><span class="l-grid-row-cell-detailbtn"></span></div></td>');return}}var column=p.columns[this.columnindex];var colwidth=this.width;if(!this.islast){gridhtmlarr.push('<td class="l-grid-row-cell" columnindex="'+this.columnindex+'" ')}else{gridhtmlarr.push('<td class="l-grid-row-cell l-grid-row-cell-last" columnindex="'+this.columnindex+'" ')}if(this.columnname){gridhtmlarr.push('columnname="'+this.columnname+'"')}gridhtmlarr.push(' style = "');gridhtmlarr.push("width:"+colwidth+'px" ');if(p.fixedCellHeight){gridhtmlarr.push('><div class="l-grid-row-cell-inner l-grid-row-cell-inner-fixedheight" ')}else{gridhtmlarr.push('><div class="l-grid-row-cell-inner" ')}gridhtmlarr.push(' style = "width:'+parseInt(colwidth-8)+"px; ");if(column&&column.align){gridhtmlarr.push("text-align:"+column.align+";")}var content="";if(column&&column.render){content=column.render(item,i)}else{if(this.columnname){if(column.type&&column.type=="date"){var date=p.renderDate(item[this.columnname]);item[this.columnname]=date;if(date!=null){if(column.format){content=g.getFormatDate(date,column.format)}else{content=g.getFormatDate(date,p.dateFormat)}}}else{content=item[this.columnname]}}}gridhtmlarr.push('">'+content+"</div></td>")});gridhtmlarr.push("</tr>")});gridhtmlarr.push("</tbody></table></div>");g.gridbody.html(gridhtmlarr.join(""));g.bulidTotalSummary();$("> div:first",g.gridbody).width(g.gridtablewidth);g.onResize();$("tbody:first > .l-grid-row",g.gridbody).hover(function(e){$(this).addClass("l-grid-row-over")},function(){$(this).removeClass("l-grid-row-over")}).click(function(e){if(p.checkbox){var row=$(this);var index=row.attr("rowindex");var uncheck=row.hasClass("l-checked");if(p.onBeforeCheckRow){if(p.onBeforeCheckRow(!uncheck,g.getRowByRowIndex(index),row,index)==false){return false}}if(uncheck){row.removeClass("l-checked")}else{row.addClass("l-checked")}p.onCheckRow&&p.onCheckRow(!uncheck,g.getRowByRowIndex(index),row,index);return}var index=$(this).attr("rowindex");if($(this).hasClass("l-selected")){$(this).removeClass("l-selected");if(p.onUnSelectRow){p.onUnSelectRow(g.getRowByRowIndex(index),this,index)}}else{$(this).siblings(".l-selected").removeClass("l-selected");$(this).addClass("l-selected");if(p.onSelectRow){p.onSelectRow(g.getRowByRowIndex(index),this,index)}}}).dblclick(function(){var index=$(this).attr("rowindex");if(p.onDblClickRow){p.onDblClickRow(this,index,g.getRowByRowIndex(index))}});$("tbody:first > .l-grid-row",g.gridbody).hover(function(e){$(this).addClass("l-grid-row-over")},function(){$(this).removeClass("l-grid-row-over")});if(p.onAfterShowData){p.onAfterShowData(grid,data)}},applyEditor:function(obj){if(obj.href||obj.type){return true}var rowcell;if($(obj).hasClass("l-grid-row-cell")){rowcell=obj}else{if($(obj).parent().hasClass("l-grid-row-cell")){rowcell=$(obj).parent()[0]}}if(!rowcell){return}var row=$(rowcell).parent();var rowindex=$(row).attr("rowindex");var columnindex=$(rowcell).attr("columnindex");var columnname=$(rowcell).attr("columnname");var column=p.columns[columnindex];var left=$(rowcell).offset().left-g.body.offset().left;var top=$(rowcell).offset().top-$(grid).offset().top-2;g.grideditor.css({left:left,top:top,width:$(rowcell).css("width"),height:$(rowcell).css("height")}).html("");g.grideditor.editingCell=null;if(column.editor&&column.editor.type=="date"){var $inputText=$("<input type='text'/>");g.grideditor.append($inputText);$inputText.val($(".l-grid-row-cell-inner",rowcell).html());$inputText.ligerDateEditor({width:$(rowcell).width(),onChangeDate:function(newValue){g.grideditor.editingValue=newValue;$(rowcell).addClass("l-grid-row-cell-edited");$(obj).html(newValue);g.updateData(rowcell,newValue)}});g.grideditor.editingCell=rowcell;g.grideditor.show()}else{if(column.editor&&column.editor.type=="select"){var $inputText=$("<input type='text'/>");g.grideditor.append($inputText);$inputText.val($(".l-grid-row-cell-inner",rowcell).html());var options={width:$(rowcell).width(),data:column.editor.data,isMultiSelect:false,onSelected:function(newValue,newText){g.grideditor.editingValue=newValue;$(rowcell).addClass("l-grid-row-cell-edited");if(column.editor.valueColumnName&&columnname){g.currentData.Rows[rowindex][columnname]=newText}g.updateData(rowcell,newValue);if(column.editor.render){$(obj).html(column.editor.render(g.currentData.Rows[rowindex]))}else{$(obj).html(newText)}}};if(column.editor.dataValueField){options.valueField=column.editor.dataValueField}if(column.editor.dataDisplayField){options.displayField=options.textField=column.editor.dataDisplayField}if(column.editor.valueColumnName){options.initValue=g.currentData.Rows[rowindex][column.editor.valueColumnName]}else{if(columnname){options.initText=g.currentData.Rows[rowindex][columnname]}}$inputText.ligerComboBox(options);g.grideditor.editingCell=rowcell;g.grideditor.show()}else{if(column.editor&&column.editor.type=="int"){var $inputText=$("<input type='text'/>");g.grideditor.append($inputText);$inputText.attr({style:"border:#6E90BE"}).val($(".l-grid-row-cell-inner",rowcell).html());$inputText.ligerSpinner({width:$(rowcell).width(),height:$(rowcell).height(),type:"int",onChangeValue:function(newValue){g.grideditor.editingValue=newValue;$(rowcell).addClass("l-grid-row-cell-edited");$(obj).html(newValue);g.updateData(rowcell,newValue)}});g.grideditor.editingCell=rowcell;g.grideditor.show()}else{if(column.editor&&(column.editor.type=="string"||column.editor.type=="text")){var $inputText=$("<input type='text' class='l-text-editing'/>");g.grideditor.append($inputText);$inputText.val($(".l-grid-row-cell-inner",rowcell).html());$inputText.ligerTextBox({width:$(rowcell).width(),height:$(rowcell).height(),onChangeValue:function(newValue){g.grideditor.editingValue=newValue;$(rowcell).addClass("l-grid-row-cell-edited");$(obj).html(newValue);g.updateData(rowcell,newValue)}}).bind("keydown",function(e){var key=e.which;if(key==13){$inputText.trigger("change");g.endEdit()}});$inputText.parent().addClass("l-text-editing");g.grideditor.editingCell=rowcell;g.grideditor.show()}}}}},endEdit:function(){var cell=g.grideditor.editingCell;var value=g.grideditor.editingValue;g.grideditor.html("").hide();if(p.onAfterEdit){p.onAfterEdit(value,cell)}},getFormatDate:function(date,dateformat){if(date=="NaN"){return null}var format=dateformat;var o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),"S":date.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(date.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return format},deleteSelectedRow:function(){var row=$(".l-selected",g.gridbody);g.deleteRow(row)},deleteRow:function(row){g.popup.hide();g.endEdit();var rowindex=row.attr("rowindex");$(row).remove();g.deleteData(rowindex);g.isDataChanged=true},deleteData:function(rowindex){g.currentData.Rows[rowindex][p.statusName]="delete"},updateData:function(cell,value){var columnindex=$(cell).attr("columnindex");var column=p.columns[columnindex];var columnname=column.name;var row=$(cell).parents(".l-grid-row:eq(0)");var rowindex=row.attr("rowindex");if(column.type&&column.type=="int"){g.currentData.Rows[rowindex][columnname]=parseInt(value)}else{if(column&&column.editor&&column.editor.type=="select"){g.currentData.Rows[rowindex][column.editor.valueColumnName?column.editor.valueColumnName:columnname]=value}else{g.currentData.Rows[rowindex][columnname]=value}}if(g.currentData.Rows[rowindex][p.statusName]==undefined){g.currentData.Rows[rowindex][p.statusName]="update"}g.isDataChanged=true},addRow:function(){var rowindex=g.currentData.Rows.length;g.currentData.Rows[rowindex]={};var rowdata=g.currentData.Rows[rowindex];if(!p.usePager&&!g.isTotalSummary()){$("tbody:first > .l-grid-row:last",g.gridbody).removeClass("l-grid-row-last")}var row=$("<tr class='l-grid-row' rowindex='"+rowindex+"'></tr>");$("tbody:first",g.gridbody).append(row);if(!p.usePager&&!g.isTotalSummary()){row.addClass("l-grid-row-last")}var celllength=$("tr > .l-grid-hd-cell",g.gridheader).length;$("tr > .l-grid-hd-cell",g.gridheader).each(function(headerCellIndex,headerCell){var columnname=$(headerCell).attr("columnname");var columnindex=$(headerCell).attr("columnindex");var column=p.columns[columnindex];var rowCell=$("<td class='l-grid-row-cell' columnindex='"+columnindex+"'><div class='l-grid-row-cell-inner'></div></td>");if(celllength==headerCellIndex+1){rowCell.addClass("l-grid-row-cell-last")}if(columnname){rowdata[columnname]="";if(column.type&&column.type=="int"){rowdata[columnname]=0}rowCell.attr({columnname:columnname})}$(".l-grid-row-cell-inner",rowCell).html(rowdata[columnname]);row.append(rowCell);rowCell.css("width",$(headerCell).css("width"));if(column.align){$(".l-grid-row-cell-inner",rowCell).css({textAlign:column.align})}if($(headerCell).is(":visible")==false){rowCell.hide()}});rowdata[p.statusName]="add";row.click(function(e){$(this).siblings(".l-selected").removeClass("l-selected");$(this).addClass("l-selected")}).hover(function(){$(this).addClass("l-grid-row-over")},function(){$(this).removeClass("l-grid-row-over")});g.isDataChanged=true},getData:function(){if(g.currentData==null){return null}return g.currentData.Rows},getCurrentPageData:function(jsonObj){var data={Rows:new Array(),Total:jsonObj.Rows.length};if(!p.newPage){p.newPage=1}for(i=(p.newPage-1)*p.pageSize;i<jsonObj.Rows.length&&i<p.newPage*p.pageSize;i++){var obj=$.extend({},jsonObj.Rows[i]);data.Rows.push(obj)}return data},getColumn:function(columnname){for(i=0;i<p.columns.length;i++){if(p.columns[i].name==columnname){return p.columns[i]}}return null},getColumnType:function(columnname){for(i=0;i<p.columns.length;i++){if(p.columns[i].name==columnname){if(p.columns[i].type){return p.columns[i].type}return"string"}}return null},compareData:function(data1,data2,columnName,columnType){switch(columnType){case"int":return parseInt(data1[columnName])<parseInt(data2[columnName])?-1:parseInt(data1[columnName])>parseInt(data2[columnName])?1:0;case"float":return parseFloat(data1[columnName])<parseFloat(data2[columnName])?-1:parseFloat(data1[columnName])>parseFloat(data2[columnName])?1:0;case"string":return data1[columnName].localeCompare(data2[columnName]);case"date":return data1[columnName]<data2[columnName]?-1:data1[columnName]>data2[columnName]?1:0}return data1[columnName].localeCompare(data2[columnName])},isTotalSummary:function(){for(var i=0;i<p.columns.length;i++){if(p.columns[i].totalSummary){return true}}return false},bulidTotalSummary:function(){if(!g.isTotalSummary()){return false}if(!g.currentData||g.currentData.Rows.length==0){return false}if(g.gridbody.totalsummary){g.gridbody.totalsummary.remove()}g.gridbody.totalsummary=$("<tr class='l-grid-totalsummary'></tr>");if(!p.usePager){g.gridbody.totalsummary.addClass("l-grid-totalsummary-nobottom")}$("tbody:first",g.gridbody).append(g.gridbody.totalsummary);$(g.headers).each(function(){var cell=$("<td class='l-grid-totalsummary-cell'><div class='l-grid-totalsummary-cell-inner'></div></td>");g.gridbody.totalsummary.append(cell);cell.css("width",this.width);if(this.islast){cell.addClass("l-grid-totalsummary-cell-last")}columnname=this.columnname;columnindex=this.columnindex;if(columnname){$("div:first",cell).attr({columnname:columnname})}if(!columnindex){return}cell.attr({columnindex:columnindex});var column=p.columns[columnindex];if(column.align){$(".l-grid-totalsummary-cell-inner",cell).css({textAlign:column.align})}if(column.totalSummary){var isExist=function(type){for(var i=0;i<types.length;i++){if(types[i].toLowerCase()==type.toLowerCase()){return true}}return false};var sum=0,count=0,avg=0;var max=parseFloat(g.currentData.Rows[0][column.name]);var min=parseFloat(g.currentData.Rows[0][column.name]);for(var i=0;i<g.currentData.Rows.length;i++){var value=parseFloat(g.currentData.Rows[i][column.name]);sum+=value;count+=1;if(value>max){max=value}if(value<min){min=value}}avg=sum*1/g.currentData.Rows.length;if(column.totalSummary.render){var renderhtml=column.totalSummary.render({sum:sum,count:count,avg:avg,min:min,max:max},column,cell);$(".l-grid-totalsummary-cell-inner:first",cell).append(renderhtml)}else{if(column.totalSummary.type){var types=column.totalSummary.type.split(",");if(isExist("sum")){$(".l-grid-totalsummary-cell-inner:first",cell).append("<div>Sum="+sum.toFixed(2)+"</div>")}if(isExist("count")){$(".l-grid-totalsummary-cell-inner:first",cell).append("<div>Count="+count+"</div>")}if(isExist("max")){$(".l-grid-totalsummary-cell-inner:first",cell).append("<div>Max="+max.toFixed(2)+"</div>")}if(isExist("min")){$(".l-grid-totalsummary-cell-inner:first",cell).append("<div>Min="+min.toFixed(2)+"</div>")}if(isExist("avg")){$(".l-grid-totalsummary-cell-inner:first",cell).append("<div>Avg="+avg.toFixed(2)+"</div>")}}}if(column.totalSummary.align){$(".l-grid-totalsummary-cell-inner:first",cell).css("textAlign",column.totalSummary.align)}}})},changeSort:function(columnName,sortOrder){if(this.loading){return true}if(p.dataAction=="local"){var columnType=g.getColumnType(columnName);if(!g.sortedData){g.sortedData=$.extend({},g.data)}if(p.sortName==columnName){g.sortedData.Rows.reverse()}else{g.sortedData.Rows.sort(function(data1,data2){return g.compareData(data1,data2,columnName,columnType)})}if(p.usePager){g.currentData=g.getCurrentPageData(g.sortedData)}else{g.currentData=g.sortedData}g.showData(g.currentData)}p.sortName=columnName;p.sortOrder=sortOrder;if(p.dataAction=="server"){g.loadData()}},changePage:function(ctype){if(this.loading){return true}if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}switch(ctype){case"first":if(p.page==1){return}p.newPage=1;break;case"prev":if(p.page==1){return}if(p.page>1){p.newPage=parseInt(p.page)-1}break;case"next":if(p.page>=p.pageCount){return}p.newPage=parseInt(p.page)+1;break;case"last":if(p.page>=p.pageCount){return}p.newPage=p.pageCount;break;case"input":var nv=parseInt($(".pcontrol input",this.toolbar).val());if(isNaN(nv)){nv=1}if(nv<1){nv=1}else{if(nv>p.pageCount){nv=p.pageCount}}$(".pcontrol input",this.toolbar).val(nv);p.newPage=nv;break}if(p.newPage==p.page){return false}if(p.newPage==1){$(".l-bar-btnfirst span",g.toolbar).addClass("l-disabled");$(".l-bar-btnprev span",g.toolbar).addClass("l-disabled")}else{$(".l-bar-btnfirst span",g.toolbar).removeClass("l-disabled");$(".l-bar-btnprev span",g.toolbar).removeClass("l-disabled")}if(p.newPage==p.pageCount){$(".l-bar-btnlast span",g.toolbar).addClass("l-disabled");$(".l-bar-btnnext span",g.toolbar).addClass("l-disabled")}else{$(".l-bar-btnlast span",g.toolbar).removeClass("l-disabled");$(".l-bar-btnnext span",g.toolbar).removeClass("l-disabled")}if(p.onChangePage){p.onChangePage(p.newPage)}if(p.dataAction=="server"){this.loadData()}else{g.currentData=g.getCurrentPageData(g.data);g.showData(g.currentData)}},buildPager:function(){$(".pcontrol input",this.toolbar).val(p.page);$(".pcontrol span",this.toolbar).html(p.pageCount);var r1=parseInt((p.page-1)*p.pageSize)+1;var r2=parseInt(r1)+parseInt(p.pageSize)-1;if(p.total<r2){r2=p.total}var stat=p.pageStatMessage;stat=stat.replace(/{from}/,r1);stat=stat.replace(/{to}/,r2);stat=stat.replace(/{total}/,p.total);$(".l-bar-text",this.toolbar).html(stat);if(p.page==1){$(".l-bar-btnfirst span",g.toolbar).addClass("l-disabled");$(".l-bar-btnprev span",g.toolbar).addClass("l-disabled")}else{$(".l-bar-btnfirst span",g.toolbar).removeClass("l-disabled");$(".l-bar-btnprev span",g.toolbar).removeClass("l-disabled")}if(p.page==p.pageCount){$(".l-bar-btnlast span",g.toolbar).addClass("l-disabled");$(".l-bar-btnnext span",g.toolbar).addClass("l-disabled")}else{$(".l-bar-btnlast span",g.toolbar).removeClass("l-disabled");$(".l-bar-btnnext span",g.toolbar).removeClass("l-disabled")}},getCheckedRows:function(){var rows=$("tbody:first > .l-checked",g.gridbody);var rowdata=[];$("tbody:first > .l-checked",g.gridbody).each(function(i,row){var rowindex=$(row).attr("rowindex");rowdata.push(g.getRowByRowIndex(parseInt(rowindex)))});return rowdata},getSelectedRow:function(){var row=$("tbody:first > .l-selected",g.gridbody);var rowindex=row.attr("rowindex");return g.getRowByRowIndex(parseInt(rowindex))},getRowByRowIndex:function(rowindex){if(g.currentData==null){return null}return g.currentData.Rows[rowindex]},onResize:function(){if(p.height&&p.height!="auto"){var windowHeight=$(window).height();var h=0;var parentHeight=null;if(typeof(p.height)=="string"&&p.height.indexOf("%")>0){var gridparent=$(grid).parent();if(p.InWindow||gridparent[0].tagName.toLowerCase()=="body"){parentHeight=windowHeight;parentHeight-=parseInt($("body").css("paddingTop"));parentHeight-=parseInt($("body").css("paddingBottom"))}else{parentHeight=gridparent.height()}h=parentHeight*parseFloat(p.height)*0.01;if(p.InWindow||gridparent[0].tagName.toLowerCase()=="body"){h-=($(grid).offset().top-parseInt($("body").css("paddingTop")))}}else{h=parseInt(p.height)}h+=p.heightDiff;g.windowHeight=windowHeight;g.setHeight(h)}},setHeight:function(h){if(p.title){h-=24}if(p.usePager){h-=32}h-=22;h>0&&g.gridbody.height(h)},dragStart:function(dragtype,e,toDragHeaderIndex){if(dragtype=="colresize"){var columnindex=g.headers[g.toDragHeaderIndex].columnindex;var width=g.headers[g.toDragHeaderIndex].width;if(columnindex==undefined){return}g.colresize={startX:e.pageX,width:width,columnindex:columnindex};$("body").css("cursor","e-resize");g.draggingline.css({height:g.body.height(),left:e.pageX-$(grid).offset().left+parseInt(g.body[0].scrollLeft),top:0}).show()}$.fn.ligerNoSelect&&$("body").ligerNoSelect()},dragMove:function(e){if(g.colresize){var diff=e.pageX-g.colresize.startX;var newwidth=g.colresize.width+diff;g.colresize.newwidth=newwidth;$("body").css("cursor","e-resize");g.draggingline.css({left:e.pageX-$(grid).offset().left+parseInt(g.body[0].scrollLeft)})}},dragEnd:function(e){if(g.colresize){if(g.colresize.newwidth==undefined){$("body").css("cursor","default");return false}var mincolumnwidth=80;var columnindex=g.colresize.columnindex;var column=p.columns[columnindex];if(column&&column.minWidth){mincolumnwidth=column.minWidth}var newwidth=g.colresize.newwidth;newwidth=newwidth<mincolumnwidth?mincolumnwidth:newwidth;var diff=newwidth-g.colresize.width;g.headers[g.toDragHeaderIndex].width+=diff;g.gridtablewidth+=diff;$("div:first",g.gridheader).width(g.gridtablewidth+40);$("div:first",g.gridbody).width(g.gridtablewidth);$(".l-grid-hd-cell[columnindex="+columnindex+"]",this.gridheader).css("width",newwidth);$("tbody:first > .l-grid-row > td[columnindex="+columnindex+"],tbody:first > .l-grid-totalsummary > td[columnindex="+columnindex+"]",this.gridbody).each(function(){$(this).css("width",newwidth);$("div:first",this).css("width",newwidth-8)});g.onResize();g.draggingline.hide();g.colresize=false}$("body").css("cursor","default");$.fn.ligerNoSelect&&$("body").ligerNoSelect(false)},onClick:function(e){var obj=(e.target||e.srcElement);var tagName=obj.tagName.toLowerCase();if(g.grideditor.editingCell){if(tagName=="html"||tagName=="body"||$(obj).hasClass("l-grid-body")||$(obj).hasClass("l-grid-row")){g.endEdit()}}if(p.showToggleColBtn){if(tagName=="html"||tagName=="body"||$(obj).hasClass("l-grid-body")||$(obj).hasClass("l-grid-row")||$(obj).hasClass("l-grid-row-cell-inner")||$(obj).hasClass("l-grid-header")){g.popup.hide()}}},toggleCol:function(columnindex,visible){var headercell=$(".l-grid-hd-cell[columnindex='"+columnindex+"']",this.gridheader);if(!headercell){return}if(visible){headercell.show();$(".l-grid-row-cell[columnindex='"+columnindex+"']",this.gridbody).show()}else{headercell.hide();$(".l-grid-row-cell[columnindex='"+columnindex+"']",this.gridbody).hide()}}};g.header=$(".l-panel-header:first",grid);g.body=$(".l-panel-body:first",grid);g.toolbar=$(".l-panel-bar:first",grid);g.popup=$(".l-grid-popup:first",grid);g.grideditor=$(".l-grid-editor:first",grid);g.gridloading=$(".l-grid-loading:first",grid);g.draggingline=$(".l-grid-dragging-line",grid);g.gridheader=$(".l-grid-header:first",grid);g.gridbody=$(".l-grid-body:first",grid);g.currentData=null;p.cssClass&&$(grid).addClass(p.cssClass);if(p.title){$(".l-panel-header-text",g.header).html(p.title)}else{g.header.hide()}g.headers=[];g.gridtablewidth=0;if(p.checkbox){var detailHeaderCell=$("<td class='l-grid-hd-cell l-grid-hd-cell-checkbox'><div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-checkbox'></div></td>");detailHeaderCell.css({width:27});$("tr:first",g.gridheader).append(detailHeaderCell);g.headers.push({width:27,ischeckbox:true});g.gridtablewidth+=28}if(p.detail&&p.detail.onShowDetail){var detailHeaderCell=$("<td class='l-grid-hd-cell l-grid-hd-cell-detail'><div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text'></div></td>");detailHeaderCell.css({width:29});$("tr:first",g.gridheader).append(detailHeaderCell);g.headers.push({width:29,isdetail:true});g.gridtablewidth+=30}$(p.columns).each(function(i,item){var $headerCell=$("<td class='l-grid-hd-cell' columnindex='"+i+"'><div class='l-grid-hd-cell-inner'><span class='l-grid-hd-cell-text'> </span></div></td>");if(i==p.columns.length-1){$headerCell.addClass("l-grid-hd-cell-last")}if(item.name){$headerCell.attr({columnname:item.name})}if(item.isSort!=undefined){$headerCell.attr({isSort:item.isSort})}if(item.isAllowHide!=undefined){$headerCell.attr({isAllowHide:item.isAllowHide})}var headerText="";if(item.display&&item.display!=""){headerText=item.display}else{if(item.headerRender){headerText=item.headerRender(item)}else{headerText="&nbsp;"}}$(".l-grid-hd-cell-text",$headerCell).html(headerText);$("tr:first",g.gridheader).append($headerCell);var colwidth=item.width;if(item.minWidth){if(item.width&&item.width>item.minWidth){colwidth=item.width}else{colwidth=item.minWidth}}else{if(item.width){colwidth=item.width}else{if(p.columnWidth){colwidth=p.columnWidth}}}g.gridtablewidth+=colwidth+1;$headerCell.width(colwidth);g.headers.push({width:colwidth,columnname:item.name,columnindex:i,islast:i==p.columns.length-1,isdetail:false})});$("div:first",g.gridheader).width(g.gridtablewidth+40);$("tr:first .l-grid-hd-cell",g.gridheader).each(function(i,td){if($(this).hasClass("l-grid-hd-cell-detail")){return}var isAllowHide=$(this).attr("isAllowHide");if(isAllowHide!=undefined&&isAllowHide.toLowerCase()=="false"){return}var chk='checked="checked"';var columnindex=$(this).attr("columnindex");var columnname=$(this).attr("columnname");if(!columnindex||!columnname){return}var header=$(".l-grid-hd-cell-text",this).html();if(this.style.display=="none"){chk=""}$("tbody",g.popup).append('<tr><td class="l-column-left"><input type="checkbox" '+chk+' class="l-checkbox" columnindex="'+columnindex+'"/></td><td class="l-column-right">'+header+"</td></tr>")});$.fn.ligerCheckBox&&$("input:checkbox",g.popup).ligerCheckBox({onBeforeClick:function(obj){if(!obj.checked){return true}if($("input:checked",g.popup).length<=p.minColToggle){return false}return true}});$(".l-grid-hd-cell",g.gridheader).bind("contextmenu",function(e){if(g.colresize){return true}if(!p.showToggleColBtn){return true}var columnindex=$(this).attr("columnindex");if(columnindex==undefined){return true}var left=(e.pageX-g.body.offset().left+parseInt(g.body[0].scrollLeft));if(columnindex==p.columns.length-1){left-=80}g.popup.css({left:left,top:g.gridheader.height()+1});g.popup.toggle();return false});if(p.isScroll==false){p.height="auto"}if(p.height=="auto"){g.gridbody.height("auto")}if(p.width){$(grid).width(p.width)}g.onResize();g.loadData();if(p.usePager){var optStr="";var selectedIndex=-1;$(p.pageSizeOptions).each(function(i,item){var selectedStr="";if(p.pageSize==item){selectedIndex=i}optStr+="<option value='"+item+"' "+selectedStr+" >"+item+"</option>"});$(".l-bar-selectpagesize",g.toolbar).append("<select name='rp'>"+optStr+"</select>");if(selectedIndex!=-1){$(".l-bar-selectpagesize select",g.toolbar)[0].selectedIndex=selectedIndex}if(p.switchPageSizeApplyComboBox&&$.fn.ligerComboBox){$(".l-bar-selectpagesize select",g.toolbar).ligerComboBox({onBeforeSelect:function(){if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}return true},width:45})}}else{g.toolbar.hide()}g.gridloading.html(p.loadingMessage);g.header.click(function(){g.popup.hide();g.endEdit()});$(".l-grid-hd-cell",g.gridheader).hover(function(){},function(){}).mousedown(function(e){if(g.colresize){return false}});$(".l-grid-hd-cell-text",g.gridheader).click(function(e){var obj=(e.target||e.srcElement);var row=$(this).parent().parent();if(!row.attr("columnname")){return}if(g.colresize){return false}if(row.attr("isSort")!=undefined&&row.attr("isSort").toLowerCase()=="false"){return}if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}var sort=$(".l-grid-hd-cell-sort",row);var columnName=$(row).attr("columnname");if(sort.length>0){if(sort.hasClass("l-grid-hd-cell-sort-asc")){sort.removeClass("l-grid-hd-cell-sort-asc");sort.addClass("l-grid-hd-cell-sort-desc");g.changeSort(columnName,"desc")}else{if(sort.hasClass("l-grid-hd-cell-sort-desc")){sort.removeClass("l-grid-hd-cell-sort-desc");sort.addClass("l-grid-hd-cell-sort-asc");g.changeSort(columnName,"asc")}}}else{$(this).after("<span class='l-grid-hd-cell-sort l-grid-hd-cell-sort-asc'>&nbsp;&nbsp;</span>");g.changeSort(columnName,"asc")}$(".l-grid-hd-cell-sort",row.siblings()).remove();return false});g.gridheader.click(function(){g.endEdit()});if(p.allowAdjustColWidth){g.gridheader.mousemove(function(e){if(g.colresize){return}var posLeft=e.pageX-$(grid).offset().left;var currentLeft=0;for(var i=0;i<g.headers.length;i++){if(g.headers[i].width){currentLeft+=g.headers[i].width+1}if(g.headers[i].isdetail||g.headers[i].ischeckbox){continue}if(posLeft>=currentLeft-2-g.gridbody[0].scrollLeft&&posLeft<=currentLeft+2-g.gridbody[0].scrollLeft){$("body").css({cursor:"e-resize"});g.toDragHeaderIndex=i;return}}$("body").css({cursor:"default"});g.toDragHeaderIndex=null}).mouseout(function(e){if(g.colresize){return}$("body").css({cursor:"default"})}).mousedown(function(e){if(g.colresize){return}if(g.toDragHeaderIndex==null){return}g.dragStart("colresize",e,g.toDragHeaderIndex)})}if(p.showToggleColBtn){$("tr",g.popup).hover(function(){$(this).addClass("l-popup-row-over")},function(){$(this).removeClass("l-popup-row-over")});var onPopupCheckboxChange=function(){if($("input:checked",g.popup).length+1<=p.minColToggle){return false}g.toggleCol($(this).attr("columnindex"),this.checked)};if($.fn.ligerCheckBox){$(":checkbox",g.popup).change(onPopupCheckboxChange)}else{$(":checkbox",g.popup).click(onPopupCheckboxChange)}}g.gridbody.scroll(function(){var scrollLeft=g.gridbody.scrollLeft();if(scrollLeft==undefined){return}g.gridheader[0].scrollLeft=scrollLeft});$(grid).click(function(e){var obj=(e.target||e.srcElement);if(obj.tagName.toLowerCase()=="span"&&$(obj).hasClass("l-grid-row-cell-detailbtn")){var row=$(obj).parent().parent().parent();if(row.parent().parent()[0]!=$("table:first",g.gridbody)[0]){return}var rowindex=parseInt($(row).attr("rowindex"));var item=g.currentData.Rows[rowindex];if($(obj).hasClass("l-open")){row.next(".l-grid-detailpanel").remove();$(obj).removeClass("l-open")}else{var detailRow=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>");var detailRowInner=$("div:first",detailRow);detailRowInner.width(g.gridtablewidth-1);detailRowInner.parent().attr("colSpan",g.headers.length).width(g.gridtablewidth-1);row.after(detailRow);if(p.detail.onShowDetail){p.detail.onShowDetail(item,detailRowInner[0]);detailRowInner.show()}else{if(p.detail.render){detailRowInner.append(p.detail.render());detailRowInner.show()}}$(obj).addClass("l-open")}return}if(obj.tagName.toLowerCase()=="div"&&$(obj).hasClass("l-grid-hd-cell-btn-checkbox")){var row=$(obj).parent().parent().parent();var uncheck=row.hasClass("l-checked");if(p.onBeforeCheckAllRow){if(p.onBeforeCheckAllRow(!uncheck,grid)==false){return false}}if(uncheck){row.removeClass("l-checked");$("tbody:first > tr",g.gridbody).removeClass("l-checked")}else{row.addClass("l-checked");$("tbody:first > tr",g.gridbody).addClass("l-checked")}p.onCheckAllRow&&p.onCheckAllRow(!uncheck,grid)}if(obj.tagName.toLowerCase()=="div"||$(obj).hasClass("l-grid-row-cell-inner")||$(obj).hasClass("l-grid-row-cell")){if(p.enabledEdit){g.applyEditor(obj)}}});$("select",g.toolbar).change(function(){if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}p.newPage=1;p.pageSize=this.value;g.loadData()});$(".pcontrol input",g.toolbar).keydown(function(e){if(e.keyCode==13){g.changePage("input")}});$(".l-bar-button",g.toolbar).hover(function(){$(this).addClass("l-bar-button-over")},function(){$(this).removeClass("l-bar-button-over")}).click(function(){if($(this).hasClass("l-bar-btnfirst")){g.changePage("first")}else{if($(this).hasClass("l-bar-btnprev")){g.changePage("prev")}else{if($(this).hasClass("l-bar-btnnext")){g.changePage("next")}else{if($(this).hasClass("l-bar-btnlast")){g.changePage("last")}else{if($(this).hasClass("l-bar-btnload")){if($("span",this).hasClass("l-disabled")){return false}if(g.isDataChanged&&!confirm(p.isContinueByDataChanged)){return false}g.loadData()}}}}}});g.toolbar.click(function(){g.popup.hide();g.endEdit()});$(document).mousemove(function(e){g.dragMove(e)}).mouseup(function(e){g.dragEnd()}).hover(function(){},function(){g.dragEnd()}).click(function(e){g.onClick(e)});if(grid.id==undefined){grid.id="LigerUI_"+new Date().getTime()}LigerUIManagers[grid.id+"_Grid"]=g;grid.usedGrid=true;$(window).resize(function(){g.onResize()})};$.ligerGridSetParms=function(p,fixedP){p=$.extend({},$.ligerDefaults.Grid,p);if(p.url&&p.data){p.dataType="local"}else{if(p.url&&!p.data){p.dataType="server"}else{if(!p.url&&p.data){p.dataType="local"}else{if(!p.url&&!p.data){p.dataType="local";p.data=[]}}}}if(p.dataType=="local"){p.dataAction="local"}if(fixedP){p=$.extend(p,fixedP)}return p};$.fn.ligerGrid=function(p){var fixedP={};p=p||{};p=$.ligerGridSetParms(p,fixedP);return this.each(function(){$.ligerAddGrid(this,p)})};$.fn.ligerSimpleGrid=function(p){var fixedP={resizable:false,usePager:false,showTableToggleBtn:false,showCheckbox:false,showToggleColBtn:false,enabledEdit:false,allowAdjustColWidth:false,onDragCol:false,onToggleCol:false,onChangeSort:false,onSuccess:false,onError:false,onSubmit:false};p=$.ligerGridSetParms(p,fixedP);return this.each(function(){$.ligerAddGrid(this,p)})}})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetLayoutManager=function(){return LigerUIManagers[this[0].id+"_Layout"]};A.fn.ligerRemoveLayoutManager=function(){return this.each(function(){LigerUIManagers[this.id+"_Layout"]=null})};A.ligerDefaults=A.ligerDefaults||{};A.ligerDefaults.Layout={topHeight:50,bottomHeight:50,leftWidth:110,centerWidth:300,rightWidth:170,InWindow:true,heightDiff:0,height:"100%",onHeightChanged:null,isLeftCollapse:false,isRightCollapse:false,allowLeftCollapse:true,allowRightCollapse:true,allowLeftResize:true,allowRightResize:true,allowTopResize:true,allowBottomResize:true,space:3};A.fn.ligerLayout=function(B){return this.each(function(){B=A.extend({},A.ligerDefaults.Layout,B||{});if(this.usedLayout){return}var F={init:function(){A("> .l-layout-left .l-layout-header,> .l-layout-right .l-layout-header",F.layout).hover(function(){A(this).addClass("l-layout-header-over")},function(){A(this).removeClass("l-layout-header-over")});A(".l-layout-header-toggle",F.layout).hover(function(){A(this).addClass("l-layout-header-toggle-over")},function(){A(this).removeClass("l-layout-header-toggle-over")});A(".l-layout-header-toggle",F.left).click(function(){F.setLeftCollapse(true)});A(".l-layout-header-toggle",F.right).click(function(){F.setRightCollapse(true)});F.middleTop=0;if(F.top){F.middleTop+=F.top.height();F.middleTop+=parseInt(F.top.css("borderTopWidth"));F.middleTop+=parseInt(F.top.css("borderBottomWidth"));F.middleTop+=B.space}if(F.left){F.left.css({top:F.middleTop});F.leftCollapse.css({top:F.middleTop})}if(F.center){F.center.css({top:F.middleTop})}if(F.right){F.right.css({top:F.middleTop});F.rightCollapse.css({top:F.middleTop})}if(F.left){F.left.css({left:0})}F.onResize();F.onResize()},setCollapse:function(){F.leftCollapse.hover(function(){A(this).addClass("l-layout-collapse-left-over")},function(){A(this).removeClass("l-layout-collapse-left-over")});F.leftCollapse.toggle.hover(function(){A(this).addClass("l-layout-collapse-left-toggle-over")},function(){A(this).removeClass("l-layout-collapse-left-toggle-over")});F.rightCollapse.hover(function(){A(this).addClass("l-layout-collapse-right-over")},function(){A(this).removeClass("l-layout-collapse-right-over")});F.rightCollapse.toggle.hover(function(){A(this).addClass("l-layout-collapse-right-toggle-over")},function(){A(this).removeClass("l-layout-collapse-right-toggle-over")});F.leftCollapse.toggle.click(function(){F.setLeftCollapse(false)});F.rightCollapse.toggle.click(function(){F.setRightCollapse(false)});if(F.left&&F.isLeftCollapse){F.leftCollapse.show();F.leftDropHandle&&F.leftDropHandle.hide();F.left.hide()}if(F.right&&F.isRightCollapse){F.rightCollapse.show();F.rightDropHandle&&F.rightDropHandle.hide();F.right.hide()}},setLeftCollapse:function(G){if(!F.left){return false}F.isLeftCollapse=G;if(F.isLeftCollapse){F.leftCollapse.show();F.leftDropHandle&&F.leftDropHandle.hide();F.left.hide()}else{F.leftCollapse.hide();F.leftDropHandle&&F.leftDropHandle.show();F.left.show()}F.onResize()},setRightCollapse:function(G){if(!F.right){return false}F.isRightCollapse=G;F.onResize();if(F.isRightCollapse){F.rightCollapse.show();F.rightDropHandle&&F.rightDropHandle.hide();F.right.hide()}else{F.rightCollapse.hide();F.rightDropHandle&&F.rightDropHandle.show();F.right.show()}F.onResize()},addDropHandle:function(){if(F.left&&B.allowLeftResize){F.leftDropHandle=A("<div class='l-layout-drophandle-left'></div>");F.layout.append(F.leftDropHandle);F.leftDropHandle&&F.leftDropHandle.show();F.leftDropHandle.mousedown(function(G){F.start("leftresize",G)})}if(F.right&&B.allowRightResize){F.rightDropHandle=A("<div class='l-layout-drophandle-right'></div>");F.layout.append(F.rightDropHandle);F.rightDropHandle&&F.rightDropHandle.show();F.rightDropHandle.mousedown(function(G){F.start("rightresize",G)})}if(F.top&&B.allowTopResize){F.topDropHandle=A("<div class='l-layout-drophandle-top'></div>");F.layout.append(F.topDropHandle);F.topDropHandle.show();F.topDropHandle.mousedown(function(G){F.start("topresize",G)})}if(F.bottom&&B.allowBottomResize){F.bottomDropHandle=A("<div class='l-layout-drophandle-bottom'></div>");F.layout.append(F.bottomDropHandle);F.bottomDropHandle.show();F.bottomDropHandle.mousedown(function(G){F.start("bottomresize",G)})}F.draggingxline=A("<div class='l-layout-dragging-xline'></div>");F.draggingyline=A("<div class='l-layout-dragging-yline'></div>");F.layout.append(F.draggingxline).append(F.draggingyline)},setDropHandlePosition:function(){if(F.leftDropHandle){F.leftDropHandle.css({left:F.left.width()+parseInt(F.left.css("left")),height:F.middleHeight,top:F.middleTop})}if(F.rightDropHandle){F.rightDropHandle.css({left:parseInt(F.right.css("left"))-B.space,height:F.middleHeight,top:F.middleTop})}if(F.topDropHandle){F.topDropHandle.css({top:F.top.height()+parseInt(F.top.css("top")),width:F.top.width()})}if(F.bottomDropHandle){F.bottomDropHandle.css({top:parseInt(F.bottom.css("top"))-B.space,width:F.bottom.width()})}},onResize:function(){var K=F.layout.height();var J=0;var G=A(window).height();var H=null;if(typeof(B.height)=="string"&&B.height.indexOf("%")>0){var I=F.layout.parent();if(B.InWindow||I[0].tagName.toLowerCase()=="body"){H=G;H-=parseInt(A("body").css("paddingTop"));H-=parseInt(A("body").css("paddingBottom"))}else{H=I.height()}J=H*parseFloat(B.height)*0.01;if(B.InWindow||I[0].tagName.toLowerCase()=="body"){J-=(F.layout.offset().top-parseInt(A("body").css("paddingTop")))}}else{J=parseInt(B.height)}J+=B.heightDiff;F.layout.height(J);F.layoutHeight=F.layout.height();F.middleWidth=F.layout.width();F.middleHeight=F.layout.height();if(F.top){F.middleHeight-=F.top.height();F.middleHeight-=parseInt(F.top.css("borderTopWidth"));F.middleHeight-=parseInt(F.top.css("borderBottomWidth"));F.middleHeight-=B.space}if(F.bottom){F.middleHeight-=F.bottom.height();F.middleHeight-=parseInt(F.bottom.css("borderTopWidth"));F.middleHeight-=parseInt(F.bottom.css("borderBottomWidth"));F.middleHeight-=B.space}F.middleHeight-=2;if(B.onHeightChanged&&F.layoutHeight!=K){B.onHeightChanged({layoutHeight:F.layoutHeight,diff:F.layoutHeight-K,middleHeight:F.middleHeight})}if(F.center){F.centerWidth=F.middleWidth;if(F.left){if(F.isLeftCollapse){F.centerWidth-=F.leftCollapse.width();F.centerWidth-=parseInt(F.leftCollapse.css("borderLeftWidth"));F.centerWidth-=parseInt(F.leftCollapse.css("borderRightWidth"));F.centerWidth-=parseInt(F.leftCollapse.css("left"));F.centerWidth-=B.space}else{F.centerWidth-=F.leftWidth;F.centerWidth-=parseInt(F.left.css("borderLeftWidth"));F.centerWidth-=parseInt(F.left.css("borderRightWidth"));F.centerWidth-=parseInt(F.left.css("left"));F.centerWidth-=B.space}}if(F.right){if(F.isRightCollapse){F.centerWidth-=F.rightCollapse.width();F.centerWidth-=parseInt(F.rightCollapse.css("borderLeftWidth"));F.centerWidth-=parseInt(F.rightCollapse.css("borderRightWidth"));F.centerWidth-=parseInt(F.rightCollapse.css("right"));F.centerWidth-=B.space}else{F.centerWidth-=F.rightWidth;F.centerWidth-=parseInt(F.right.css("borderLeftWidth"));F.centerWidth-=parseInt(F.right.css("borderRightWidth"));F.centerWidth-=B.space}}F.centerLeft=0;if(F.left){if(F.isLeftCollapse){F.centerLeft+=F.leftCollapse.width();F.centerLeft+=parseInt(F.leftCollapse.css("borderLeftWidth"));F.centerLeft+=parseInt(F.leftCollapse.css("borderRightWidth"));F.centerLeft+=parseInt(F.leftCollapse.css("left"));F.centerLeft+=B.space}else{F.centerLeft+=F.left.width();F.centerLeft+=parseInt(F.left.css("borderLeftWidth"));F.centerLeft+=parseInt(F.left.css("borderRightWidth"));F.centerLeft+=B.space}}F.center.css({left:F.centerLeft});F.center.width(F.centerWidth);F.center.height(F.middleHeight)}if(F.left){F.leftCollapse.height(F.middleHeight);F.left.height(F.middleHeight)}if(F.right){F.rightCollapse.height(F.middleHeight);F.right.height(F.middleHeight);F.rightLeft=0;if(F.left){if(F.isLeftCollapse){F.rightLeft+=F.leftCollapse.width();F.rightLeft+=parseInt(F.leftCollapse.css("borderLeftWidth"));F.rightLeft+=parseInt(F.leftCollapse.css("borderRightWidth"));F.rightLeft+=B.space}else{F.rightLeft+=F.left.width();F.rightLeft+=parseInt(F.left.css("borderLeftWidth"));F.rightLeft+=parseInt(F.left.css("borderRightWidth"));F.rightLeft+=parseInt(F.left.css("left"));F.rightLeft+=B.space}}if(F.center){F.rightLeft+=F.center.width();F.rightLeft+=parseInt(F.center.css("borderLeftWidth"));F.rightLeft+=parseInt(F.center.css("borderRightWidth"));F.rightLeft+=B.space}F.right.css({left:F.rightLeft})}if(F.bottom){F.bottomTop=F.layoutHeight-F.bottom.height()-2;F.bottom.css({top:F.bottomTop})}F.setDropHandlePosition()},start:function(H,G){F.dragtype=H;if(H=="leftresize"||H=="rightresize"){F.xresize={startX:G.pageX};F.draggingyline.css({left:G.pageX-F.layout.offset().left,height:F.middleHeight,top:F.middleTop}).show();A("body").css("cursor","col-resize")}else{if(H=="topresize"||H=="bottomresize"){F.yresize={startY:G.pageY};F.draggingxline.css({top:G.pageY-F.layout.offset().top,width:F.layout.width()}).show();A("body").css("cursor","row-resize")}else{return}}F.layout.lock.width(F.layout.width());F.layout.lock.height(F.layout.height());F.layout.lock.show();if(A.browser.msie||A.browser.safari){A("body").bind("selectstart",function(){return false})}A(document).bind("mouseup",F.stop);A(document).bind("mousemove",F.drag)},drag:function(G){if(F.xresize){F.xresize.diff=G.pageX-F.xresize.startX;F.draggingyline.css({left:G.pageX-F.layout.offset().left});A("body").css("cursor","col-resize")}else{if(F.yresize){F.yresize.diff=G.pageY-F.yresize.startY;F.draggingxline.css({top:G.pageY-F.layout.offset().top});A("body").css("cursor","row-resize")}}},stop:function(G){if(F.xresize&&F.xresize.diff!=undefined){if(F.dragtype=="leftresize"){F.leftWidth+=F.xresize.diff;F.left.width(F.leftWidth);if(F.center){F.center.width(F.center.width()-F.xresize.diff).css({left:parseInt(F.center.css("left"))+F.xresize.diff})}else{if(F.right){F.right.width(F.left.width()-F.xresize.diff).css({left:parseInt(F.right.css("left"))+F.xresize.diff})}}}else{if(F.dragtype=="rightresize"){F.rightWidth-=F.xresize.diff;F.right.width(F.rightWidth).css({left:parseInt(F.right.css("left"))+F.xresize.diff});if(F.center){F.center.width(F.center.width()+F.xresize.diff)}else{if(F.left){F.left.width(F.left.width()+F.xresize.diff)}}}}}else{if(F.yresize&&F.yresize.diff!=undefined){if(F.dragtype=="topresize"){F.top.height(F.top.height()+F.yresize.diff);F.middleTop+=F.yresize.diff;F.middleHeight-=F.yresize.diff;if(F.left){F.left.css({top:F.middleTop}).height(F.middleHeight);F.leftCollapse.css({top:F.middleTop}).height(F.middleHeight)}if(F.center){F.center.css({top:F.middleTop}).height(F.middleHeight)}if(F.right){F.right.css({top:F.middleTop}).height(F.middleHeight);F.rightCollapse.css({top:F.middleTop}).height(F.middleHeight)}}else{if(F.dragtype=="bottomresize"){F.bottom.height(F.bottom.height()-F.yresize.diff);F.middleHeight+=F.yresize.diff;F.bottomTop+=F.yresize.diff;F.bottom.css({top:F.bottomTop});if(F.left){F.left.height(F.middleHeight);F.leftCollapse.height(F.middleHeight)}if(F.center){F.center.height(F.middleHeight)}if(F.right){F.right.height(F.middleHeight);F.rightCollapse.height(F.middleHeight)}}}}}F.setDropHandlePosition();F.draggingxline.hide();F.draggingyline.hide();F.xresize=F.yresize=F.dragtype=false;F.layout.lock.hide();if(A.browser.msie||A.browser.safari){A("body").unbind("selectstart")}A(document).unbind("mousemove",F.drag);A(document).unbind("mouseup",F.stop);A("body").css("cursor","")}};F.layout=A(this);if(!F.layout.hasClass("l-layout")){F.layout.addClass("l-layout")}F.width=F.layout.width();if(A("> div[position=top]",F.layout).length>0){F.top=A("> div[position=top]",F.layout).wrap('<div class="l-layout-top" style="top:0px;"></div>').parent();F.top.content=A("> div[position=top]",F.top);if(!F.top.content.hasClass("l-layout-content")){F.top.content.addClass("l-layout-content")}F.topHeight=B.topHeight;if(F.topHeight){F.top.height(F.topHeight)}}if(A("> div[position=bottom]",F.layout).length>0){F.bottom=A("> div[position=bottom]",F.layout).wrap('<div class="l-layout-bottom"></div>').parent();F.bottom.content=A("> div[position=bottom]",F.top);if(!F.bottom.content.hasClass("l-layout-content")){F.bottom.content.addClass("l-layout-content")}F.bottomHeight=B.bottomHeight;if(F.bottomHeight){F.bottom.height(F.bottomHeight)}}if(A("> div[position=left]",F.layout).length>0){F.left=A("> div[position=left]",F.layout).wrap('<div class="l-layout-left" style="left:0px;"></div>').parent();F.left.header=A('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>');F.left.prepend(F.left.header);F.left.header.toggle=A(".l-layout-header-toggle",F.left.header);F.left.content=A("> div[position=left]",F.left);if(!F.left.content.hasClass("l-layout-content")){F.left.content.addClass("l-layout-content")}if(!B.allowLeftCollapse){A(".l-layout-header-toggle",F.left.header).remove()}var D=F.left.content.attr("title");if(D){F.left.content.attr("title","");A(".l-layout-header-inner",F.left.header).html(D)}F.leftWidth=B.leftWidth;if(F.leftWidth){F.left.width(F.leftWidth)}}if(A("> div[position=center]",F.layout).length>0){F.center=A("> div[position=center]",F.layout).wrap('<div class="l-layout-center" ></div>').parent();F.center.content=A("> div[position=center]",F.center);if(!F.center.content.hasClass("l-layout-content")){F.center.content.addClass("l-layout-content")}var E=F.center.content.attr("title");if(E){F.center.content.attr("title","");F.center.header=A('<div class="l-layout-header"></div>');F.center.prepend(F.center.header);F.center.header.html(E)}F.centerWidth=B.centerWidth;if(F.centerWidth){F.center.width(F.centerWidth)}}if(A("> div[position=right]",F.layout).length>0){F.right=A("> div[position=right]",F.layout).wrap('<div class="l-layout-right"></div>').parent();F.right.header=A('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>');F.right.prepend(F.right.header);F.right.header.toggle=A(".l-layout-header-toggle",F.right.header);if(!B.allowRightCollapse){A(".l-layout-header-toggle",F.right.header).remove()}F.right.content=A("> div[position=left]",F.right);if(!F.right.content.hasClass("l-layout-content")){F.right.content.addClass("l-layout-content")}var C=F.right.content.attr("title");if(C){F.right.content.attr("title","");A(".l-layout-header-inner",F.right.header).html(C)}F.rightWidth=B.rightWidth;if(F.rightWidth){F.right.width(F.rightWidth)}}F.layout.lock=A("<div class='l-layout-lock'></div>");F.layout.append(F.layout.lock);F.addDropHandle();F.isLeftCollapse=B.isLeftCollapse;F.isRightCollapse=B.isRightCollapse;F.leftCollapse=A('<div class="l-layout-collapse-left" style="display: none; "><div class="l-layout-collapse-left-toggle"></div></div>');F.rightCollapse=A('<div class="l-layout-collapse-right" style="display: none; "><div class="l-layout-collapse-right-toggle"></div></div>');F.layout.append(F.leftCollapse).append(F.rightCollapse);F.leftCollapse.toggle=A("> .l-layout-collapse-left-toggle",F.leftCollapse);F.rightCollapse.toggle=A("> .l-layout-collapse-right-toggle",F.rightCollapse);F.setCollapse();F.init();A(window).resize(function(){F.onResize()});if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_Layout"]=F;this.usedLayout=true})}})(jQuery);if(typeof(LigerUIMenu)=="undefined"){LigerUIMenu={}}(function(A){A.ligerDefaults=A.ligerDefaults||{};A.ligerDefaults.Menu={width:120,top:0,left:0,items:null,shadow:true};A.ligerMenu=function(B){B=A.extend({},A.ligerDefaults.Menu,B||{});var C={show:function(E,D){if(D==undefined){D=C.menu}if(E&&E.left!=undefined){D.css({left:E.left})}if(E&&E.top!=undefined){D.css({top:E.top})}D.show();C.updateShadow(D)},updateShadow:function(D){if(!B.shadow){return}D.shadow.css({left:D.css("left"),top:D.css("top"),width:D.outerWidth(),height:D.outerHeight()});if(D.is(":visible")){D.shadow.show()}else{D.shadow.hide()}},hide:function(D){if(D==undefined){D=C.menu}C.hideAllSubMenu(D);D.hide();C.updateShadow(D)},toggle:function(){C.menu.toggle();C.updateShadow(C.menu)},removeItem:function(D){A("> .l-menu-item[menuitemid="+D+"]",C.menu.items).remove();C.itemCount--},setEnable:function(D){A("> .l-menu-item[menuitemid="+D+"]",C.menu.items).removeClass("l-menu-item-disable")},setDisable:function(D){A("> .l-menu-item[menuitemid="+D+"]",C.menu.items).addClass("l-menu-item-disable")},isEnable:function(D){return !A("> .l-menu-item[menuitemid="+D+"]",C.menu.items).hasClass("l-menu-item-disable")},getItemCount:function(){return A("> .l-menu-item",C.menu.items).length},addItem:function(G,E){if(!G){return}if(E==undefined){E=C.menu}if(G.line){E.items.append('<div class="l-menu-item-line"></div>');return}var H=A('<div class="l-menu-item"><div class="l-menu-item-text"></div> </div>');var I=A("> .l-menu-item",E.items).length;E.items.append(H);G.id&&H.attr("menuitemid",G.id);G.text&&A(">.l-menu-item-text:first",H).html(G.text);G.icon&&H.prepend('<div class="l-menu-item-icon l-icon-'+G.icon+'"></div>');G.disable&&H.addClass("l-menu-item-disable");if(G.children){if(H.attr("menuitemid")==undefined){H.attr("menuitemid",new Date().getTime())}H.append('<div class="l-menu-item-arrow"></div>');var F=C.createMenu(H.attr("menuitemid"));LigerUIMenu[H.attr("menuitemid")]=F;F.width(B.width);F.hover(null,function(){if(!F.showedSubMenu){C.hide(F)}});A(G.children).each(function(){C.addItem(this,F)})}G.click&&H.click(function(){if(A(this).hasClass("l-menu-item-disable")){return}G.click(G,I)});G.dblclick&&H.dblclick(function(){if(A(this).hasClass("l-menu-item-disable")){return}G.dblclick(G,I)});var D=A("> .l-menu-over:first",E);H.hover(function(){if(A(this).hasClass("l-menu-item-disable")){return}var L=A(this).offset().top;var J=L-E.offset().top;D.css({top:J});C.hideAllSubMenu(E);if(G.children){var K=A(this).attr("menuitemid");if(!K){return}if(LigerUIMenu[K]){C.show({top:L,left:A(this).offset().left+A(this).width()-5},LigerUIMenu[K]);E.showedSubMenu=true}}},function(){if(A(this).hasClass("l-menu-item-disable")){return}var J=A(this).attr("menuitemid");if(G.children){var J=A(this).attr("menuitemid");if(!J){return}}})},hideAllSubMenu:function(D){if(D==undefined){D=C.menu}A("> .l-menu-item",D.items).each(function(){if(A("> .l-menu-item-arrow",this).length>0){var E=A(this).attr("menuitemid");if(!E){return}LigerUIMenu[E]&&C.hide(LigerUIMenu[E])}});D.showedSubMenu=false},createMenu:function(D){var E=A('<div class="l-menu" style="display:none"><div class="l-menu-yline"></div><div class="l-menu-over"><div class="l-menu-over-l"></div> <div class="l-menu-over-r"></div></div><div class="l-menu-inner"></div></div>');D&&E.attr("parentmenuitemid",D);E.items=A("> .l-menu-inner:first",E);E.appendTo("body");if(B.shadow){E.shadow=A('<div class="l-menu-shadow"></div>').insertAfter(E);C.updateShadow(E)}E.hover(null,function(){if(!E.showedSubMenu){A("> .l-menu-over:first",E).css({top:-24})}});return E}};C.menu=C.createMenu();C.menu.css({top:B.top,left:B.left,width:B.width});B.items&&A(B.items).each(function(D,E){C.addItem(E)});return C};A(document).click(function(){A(".l-menu,.l-menu-shadow").hide()})})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetMenuBarManager=function(){return LigerUIManagers[this[0].id+"_MenuBar"]};A.fn.ligerMenuBar=function(B){return this.each(function(){if(this.usedMenuBar){return}var C={addItem:function(E){var F=A('<div class="l-menubar-item l-panel-btn"><span></span><div class="l-panel-btn-l"></div><div class="l-panel-btn-r"></div><div class="l-menubar-item-down"></div></div>');C.menubar.append(F);E.id&&F.attr("menubarid",E.id);E.text&&A("span:first",F).html(E.text);E.disable&&F.addClass("l-menubar-item-disable");E.click&&F.click(function(){E.click(E)});if(E.menu){var D=A.ligerMenu(E.menu);F.hover(function(){C.actionMenu&&C.actionMenu.hide();var H=A(this).offset().left;var G=A(this).offset().top+A(this).height();D.show({top:G,left:H});C.actionMenu=D;A(this).addClass("l-panel-btn-over l-panel-btn-selected").siblings(".l-menubar-item").removeClass("l-panel-btn-selected")},function(){A(this).removeClass("l-panel-btn-over")})}else{F.hover(function(){A(this).addClass("l-panel-btn-over")},function(){A(this).removeClass("l-panel-btn-over")});A(".l-menubar-item-down",F).remove()}}};C.menubar=A(this);if(!C.menubar.hasClass("l-menubar")){C.menubar.addClass("l-menubar")}if(B&&B.items){A(B.items).each(function(D,E){C.addItem(E)})}A(document).click(function(){A(".l-panel-btn-selected",C.menubar).removeClass("l-panel-btn-selected")});if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_MenuBar"]=C;this.usedMenuBar=true})}})(jQuery);(function(A){A.ligerMessageBox={};A.ligerMessageBox.show=function(G){G=G||{};G.isDrag==undefined&&(G.isDrag=true);var E="";E+='<div class="l-messagebox">';E+='        <div class="l-messagebox-lt"></div><div class="l-messagebox-rt"></div>';E+='        <div class="l-messagebox-l"></div><div class="l-messagebox-r"></div> ';E+='        <div class="l-messagebox-image"></div>';E+='        <div class="l-messagebox-title">';E+='            <div class="l-messagebox-title-inner"></div>';E+='            <div class="l-messagebox-close"></div>';E+="        </div>";E+='        <div class="l-messagebox-content">';E+="        </div>";E+='        <div class="l-messagebox-buttons"><div class="l-messagebox-buttons-inner">';E+="        </div></div>";E+="    </div>";var H={applyWindowMask:function(){A(".l-window-mask").remove();A("<div class='l-window-mask' style='display: block;'></div>").appendTo(A("body"))},removeWindowMask:function(){A(".l-window-mask").remove()},applyDrag:function(){if(G.isDrag&&A.fn.ligerDrag){D.ligerDrag({handler:".l-messagebox-title"})}},setImage:function(){if(G.type){if(G.type=="success"||G.type=="donne"){A(".l-messagebox-image",D).addClass("l-messagebox-image-donne").show();A(".l-messagebox-content",D).css({paddingLeft:64,paddingBottom:30})}else{if(G.type=="error"){A(".l-messagebox-image",D).addClass("l-messagebox-image-error").show();A(".l-messagebox-content",D).css({paddingLeft:64,paddingBottom:30})}else{if(G.type=="warn"){A(".l-messagebox-image",D).addClass("l-messagebox-image-warn").show();A(".l-messagebox-content",D).css({paddingLeft:64,paddingBottom:30})}else{if(G.type=="question"){A(".l-messagebox-image",D).addClass("l-messagebox-image-question").show();A(".l-messagebox-content",D).css({paddingLeft:64,paddingBottom:40})}}}}}}};var D=A(E);A("body").append(D);D.close=function(){H.removeWindowMask();D.remove()};G.width&&D.width(G.width);G.title&&A(".l-messagebox-title-inner",D).html(G.title);G.content&&A(".l-messagebox-content",D).html(G.content);if(G.buttons){A(G.buttons).each(function(I,J){var K=A('<div class="l-messagebox-btn"><div class="l-messagebox-btn-l"></div><div class="l-messagebox-btn-r"></div><div class="l-messagebox-btn-inner"></div></div>');A(".l-messagebox-btn-inner",K).html(J.text);A(".l-messagebox-buttons-inner",D).append(K);J.width&&K.width(J.width);J.onclick&&K.click(function(){J.onclick(J,I,D)})});A(".l-messagebox-buttons-inner",D).append("<div class='l-clear'></div>")}var F=D.width();var C=0;A(".l-messagebox-buttons-inner .l-messagebox-btn",D).each(function(){C+=A(this).width()});A(".l-messagebox-buttons-inner",D).css({marginLeft:parseInt((F-C)*0.5)});H.applyWindowMask();H.applyDrag();H.setImage();A(".l-messagebox-btn",D).hover(function(){A(this).addClass("l-messagebox-btn-over");A(".l-messagebox-btn-l",this).addClass("l-messagebox-btn-l-over");A(".l-messagebox-btn-r",this).addClass("l-messagebox-btn-r-over")},function(){A(this).removeClass("l-messagebox-btn-over");A(".l-messagebox-btn-l",this).removeClass("l-messagebox-btn-l-over");A(".l-messagebox-btn-r",this).removeClass("l-messagebox-btn-r-over")});A(".l-messagebox-close",D).hover(function(){A(this).addClass("l-messagebox-close-over")},function(){A(this).removeClass("l-messagebox-close-over")}).click(function(){D.close()})};A.ligerMessageBox.alert=function(C,F,D,E){C=C||"";F=F||C;var G={onclick:function(I,J,H){H.close();if(E){E(I,J,H)}}};p={title:C,content:F,buttons:[{text:"确定",onclick:G.onclick}]};if(D){p.type=D}A.ligerMessageBox.show(p)};A.ligerMessageBox.confirm=function(C,E,F){var D={onclick:function(H,I,G){G.close();if(F){F(I==0)}}};p={type:"question",title:C,content:E,buttons:[{text:"是",onclick:D.onclick},{text:"否",onclick:D.onclick}]};A.ligerMessageBox.show(p)};A.ligerMessageBox.success=function(C,E,D){A.ligerMessageBox.alert(C,E,"success",D)};A.ligerMessageBox.error=function(C,E,D){A.ligerMessageBox.alert(C,E,"error",D)};A.ligerMessageBox.warn=function(C,E,D){A.ligerMessageBox.alert(C,E,"warn",D)};A.ligerMessageBox.question=function(C,D){A.ligerMessageBox.alert(C,D,"question")};function B(){var D="../lib/ligerUI/skins/Aqua/images/";var C=["box/box-btn-done.gif","box/box-btn-error.gif","box/box-btn-l.gif","box/box-btn-l-over.gif","box/box-btn-question.gif","box/box-btn-over.gif","box/box-righttop.gif","box/box-lefttop.gif","box/box-top.gif","box/box-btn-r.gif","box/box-btn-r-over.gif","box/box-btn-warn.gif","box/box-close.gif","box/box-close-over.gif","box/tabs-item-left-bg.gif"];for(i=0;i<C.length;i++){new Image().src=D+C[i]}}})(jQuery);(function(A){A.fn.ligerNoSelect=function(B){if(B==null){prevent=true}else{prevent=B}if(prevent){return this.each(function(){if(A.browser.msie||A.browser.safari){A(this).bind("selectstart",function(){return false})}else{if(A.browser.mozilla){A(this).css("MozUserSelect","none");A("body").trigger("focus")}else{if(A.browser.opera){A(this).bind("mousedown",function(){return false})}else{A(this).attr("unselectable","on")}}}})}else{return this.each(function(){if(A.browser.msie||A.browser.safari){A(this).unbind("selectstart")}else{if(A.browser.mozilla){A(this).css("MozUserSelect","inherit")}else{if(A.browser.opera){A(this).unbind("mousedown")}else{A(this).removeAttr("unselectable","on")}}}})}}})(jQuery);(function(A){A.fn.ligerRadio=function(){return this.each(function(){if(this.usedRadio){return}if(A(this).hasClass("l-hidden")){return}var B={};B.input=A(this);B.link=A('<a href="javascript:void(0)" class="l-radio"></a>');B.wrapper=B.input.addClass("l-hidden").wrap('<div class="l-radio-wrapper"></div>').parent();B.wrapper.prepend(B.link);B.input.change(function(){if(this.checked){B.link.addClass("l-radio-checked")}else{B.link.removeClass("l-radio-checked")}return true});B.link.click(function(){if(B.input.attr("disabled")){return false}B.input.trigger("click").trigger("change");var C;if(B.input[0].form){C=B.input[0].form}else{C=document}A("input:radio[name="+B.input[0].name+"]",C).not(B.input).trigger("change");return false});B.wrapper.hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")});this.checked&&B.link.addClass("l-radio-checked");this.usedRadio=true})}})(jQuery);(function(A){A.ligerDefaults=A.ligerDefaults||{};A.ligerDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2000,maxHeight:2000,minWidth:20,minHeight:20,onStartResize:function(B){},onResize:function(B){},onStopResize:function(B){},onEndResize:null};A.fn.ligerResizable=function(B){return this.each(function(){B=A.extend({},A.ligerDefaults.Resizable,B||{});var C={init:function(){C.target.append('<div class="l-resizable"></div>');var D=B.handles.split(",");for(var E=0;E<D.length;E++){switch(D[E].replace(/(^\s*)|(\s*$)/g,"")){case"nw":C.target.append('<div class="l-resizable-h-l" direction="nw"></div>');break;case"ne":C.target.append('<div class="l-resizable-h-r" direction="ne"></div>');break;case"n":C.target.append('<div class="l-resizable-h-c" direction="n"></div>');break;case"w":C.target.append('<div class="l-resizable-c-l" direction="w"></div>');break;case"e":C.target.append('<div class="l-resizable-c-r" direction="e"></div>');break;case"sw":C.target.append('<div class="l-resizable-f-l" direction="sw"></div>');break;case"se":C.target.append('<div class="l-resizable-f-r" direction="se"></div>');break;case"s":C.target.append('<div class="l-resizable-f-c" direction="s"></div>');break}}A("> .l-resizable-h-c , > .l-resizable-f-c",C.target).width(C.target.width());A("> .l-resizable-c-l , > .l-resizable-c-r",C.target).height(C.target.height());C.target.resizable=A("> .l-resizable",C.target)},start:function(E,D){if(A.browser.msie||A.browser.safari){A("body").bind("selectstart",function(){return false})}A(".l-window-mask-nobackground").remove();A("<div class='l-window-mask-nobackground' style='display: block;'></div>").appendTo(A("body"));C.target.resizable.css({width:C.target.width(),height:C.target.height(),left:0,top:0});C.current={dir:D,left:C.target.offset().left,top:C.target.offset().top,width:C.target.width(),height:C.target.height()};A(document).bind("mouseup",C.stop);A(document).bind("mousemove",C.drag);C.target.resizable.show();if(B.onStartResize){B.onStartResize(C.current,E)}},drag:function(J){var F=C.current.dir;var D=C.target.resizable[0];var G=C.current.width;var E=C.current.height;var I=(J.pageX||J.screenX)-C.current.left;var H=(J.pageY||J.clientY)-C.current.top;if(F.indexOf("e")>=0){I-=G}if(F.indexOf("s")>=0){H-=E}if(F!="n"&&F!="s"){G+=(F.indexOf("w")>=0)?-I:I}if(G>=B.minWidth){if(F.indexOf("w")>=0){D.style.left=I+"px"}if(F!="n"&&F!="s"){D.style.width=G+"px"}}if(F!="w"&&F!="e"){E+=(F.indexOf("n")>=0)?-H:H}if(E>=B.minHeight){if(F.indexOf("n")>=0){D.style.top=H+"px"}if(F!="w"&&F!="e"){D.style.height=E+"px"}}C.current.newWidth=G;C.current.newHeight=E;C.current.diffTop=parseInt(D.style.top);if(isNaN(C.current.diffTop)){C.current.diffTop=0}C.current.diffLeft=parseInt(D.style.left);if(isNaN(C.current.diffLeft)){C.current.diffLeft=0}A("body").css("cursor",F+"-resize");if(B.onResize){B.onResize(C.current,J)}},stop:function(D){if(A.browser.msie||A.browser.safari){A("body").unbind("selectstart")}A(".l-window-mask-nobackground").remove();if(!B.onStopResize){C.applyResize()}else{if(B.onStopResize(C.current,D)!=false){C.applyResize()}}B.onEndResize&&B.onEndResize(C.current,D);A("body").css("cursor","");C.target.resizable.hide();A(document).unbind("mousemove",C.drag);A(document).unbind("mouseup",C.stop)},applyResize:function(){var D=0;var E=0;if(!isNaN(parseInt(C.target.css("top")))){D=parseInt(C.target.css("top"))}if(!isNaN(parseInt(C.target.css("left")))){E=parseInt(C.target.css("left"))}if(C.current.diffTop!=undefined){if(C.current.diffTop!=0){C.target.css({top:D+C.current.diffTop})}if(C.current.diffLeft!=0){C.target.css({left:E+C.current.diffLeft})}C.target.css({width:C.current.newWidth,height:C.current.newHeight})}}};C.target=A(this);C.init();A(">div",C.target).mousedown(function(D){if(!A(this).attr("direction")){return}C.start(D,A(this).attr("direction"));return false})})}})(jQuery);(function(A){A.fn.ligerSpinner=function(B){B=B||{};B=A.extend({type:"float",isNegative:true,decimalplace:2,step:0.1,interval:50,onChangeValue:false},B);if(B.type=="float"){B.step=0.1;B.interval=50}else{if(B.type=="int"){B.step=1;B.interval=100}else{if(B.type=="time"){B.step=1;B.interval=100}}}return this.each(function(){if(this.useSpinner){return}var C={round:function(E,F){var D=1;for(;F>0;D*=10,F--){}for(;F<0;D/=10,F++){}return Math.round(E*D)/D},isInt:function(D){var E=B.isNegative?/^-?\d+$/:/^\d+$/;if(!E.test(D)){return false}if(parseFloat(D)!=D){return false}return true},isFloat:function(D){var E=B.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/;if(!E.test(D)){return false}if(parseFloat(D)!=D){return false}return true},isTime:function(E){var D=E.match(/^(\d{1,2}):(\d{1,2})$/);if(D==null){return false}if(D[1]>24||D[2]>60){return false}return true},isVerify:function(D){if(B.type=="float"){return C.isFloat(D)}else{if(B.type=="int"){return C.isInt(D)}else{if(B.type=="time"){return C.isTime(D)}}}return false},getVerifyValue:function(E){var D=null;if(B.type=="float"){D=C.round(E,B.decimalplace)}else{if(B.type=="int"){D=parseInt(E)}else{if(B.type=="time"){D=E}}}if(!C.isVerify(D)){return C.value}else{return D}},getDefaultValue:function(){if(B.type=="float"||B.type=="int"){return 0}else{if(B.type=="time"){return"00:00"}}},addValue:function(E){var D=C.inputText.val();D=parseFloat(D)+E;C.inputText.val(D);C.inputText.trigger("change")},addTime:function(F){var D=C.inputText.val();var E=D.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(E[2])+F;if(newminute<10){newminute="0"+newminute}D=E[1]+":"+newminute;C.inputText.val(D);C.inputText.trigger("change")},uping:function(){if(B.type=="float"||B.type=="int"){C.addValue(B.step)}else{if(B.type=="time"){C.addTime(B.step)}}},downing:function(){if(B.type=="float"||B.type=="int"){C.addValue(-1*B.step)}else{if(B.type=="time"){C.addTime(-1*B.step)}}},isDateTime:function(E){var D=E.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(D==null){return false}var F=new Date(D[1],D[3]-1,D[4]);if(F=="NaN"){return false}return(F.getFullYear()==D[1]&&(F.getMonth()+1)==D[3]&&F.getDate()==D[4])},isLongDateTime:function(F){var E=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/;var D=F.match(E);if(D==null){return false}var G=new Date(D[1],D[3]-1,D[4],D[5],D[6]);if(G=="NaN"){return false}return(G.getFullYear()==D[1]&&(G.getMonth()+1)==D[3]&&G.getDate()==D[4]&&G.getHours()==D[5]&&G.getMinutes()==D[6])},interval:null,inputText:null,value:null,textFieldID:""};if(this.tagName.toLowerCase()=="input"&&this.type&&this.type=="text"){C.inputText=A(this);if(this.id){C.textFieldID=this.id}}else{C.inputText=A('<input type="text"/>');C.inputText.appendTo(A(this))}if(C.textFieldID==""&&B.textFieldID){C.textFieldID=B.textFieldID}C.link=A('<div class="l-trigger"><div class="l-spinner-up"><div class="l-spinner-icon"></div></div><div class="l-spinner-split"></div><div class="l-spinner-down"><div class="l-spinner-icon"></div></div></div>');C.wrapper=C.inputText.wrap('<div class="l-text"></div>').parent();C.wrapper.append(C.link).after(C.selectBox).after(C.valueField);C.link.up=A(".l-spinner-up",C.link);C.link.down=A(".l-spinner-down",C.link);if(!C.inputText.hasClass("l-text-field")){C.inputText.addClass("l-text-field")}if(B.width){C.wrapper.css({width:B.width});C.inputText.css({width:B.width-20})}if(B.height){C.wrapper.height(B.height);C.inputText.height(B.height-2);C.link.height(B.height-4)}if(!C.isVerify(C.inputText.val())){C.value=C.getDefaultValue();C.inputText.val(C.value)}C.link.up.hover(function(){A(this).addClass("l-spinner-up-over")},function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false);A(this).removeClass("l-spinner-up-over")}).mousedown(function(){C.uping();C.interval=setInterval(C.uping,B.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect()}).mouseup(function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false)});C.link.down.hover(function(){A(this).addClass("l-spinner-down-over")},function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false);A(this).removeClass("l-spinner-down-over")}).mousedown(function(){C.interval=setInterval(C.downing,B.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect()}).mouseup(function(){clearInterval(C.interval);A.fn.ligerNoSelect&&A("body").ligerNoSelect(false)});C.inputText.change(function(){var D=C.inputText.val();C.value=C.getVerifyValue(D);if(B.onChangeValue){B.onChangeValue(C.value)}C.inputText.val(C.value)});this.useSpinner=true})}})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetTabManager=function(){return LigerUIManagers[this[0].id+"_Tab"]};A.ligerDefaults=A.ligerDefaults||{};A.ligerDefaults.Tab={height:null,heightDiff:0,changeHeightOnResize:false,contextmenu:true,closeMessage:"关闭当前页",closeOtherMessage:"关闭其他",closeAllMessage:"关闭所有",reloadMessage:"刷新",onBeforeOverrideTabItem:null,onAfterOverrideTabItem:null,onBeforeRemoveTabItem:null,onAfterRemoveTabItem:null,onBeforeAddTabItem:null,onAfterAddTabItem:null,onBeforeSelectTabItem:null,onAfterSelectTabItem:null};A.fn.ligerTab=function(B){B=A.extend({},A.ligerDefaults.Tab,B||{});return this.each(function(){if(this.usedTab){return}if(A(this).hasClass("l-hidden")){return}var E={setTabButton:function(){var F=0;A("li",E.tab.links.ul).each(function(){F+=A(this).width()+2});var G=E.tab.width();if(F>G){E.tab.links.append('<div class="l-tab-links-left"></div><div class="l-tab-links-right"></div>');E.setTabButtonEven();return true}else{E.tab.links.ul.animate({left:0});A(".l-tab-links-left,.l-tab-links-right",E.tab.links).remove();return false}},setTabButtonEven:function(){A(".l-tab-links-left",E.tab.links).hover(function(){A(this).addClass("l-tab-links-left-over")},function(){A(this).removeClass("l-tab-links-left-over")}).click(function(){E.moveToPrevTabItem()});A(".l-tab-links-right",E.tab.links).hover(function(){A(this).addClass("l-tab-links-right-over")},function(){A(this).removeClass("l-tab-links-right-over")}).click(function(){E.moveToNextTabItem()})},moveToPrevTabItem:function(){var I=A(".l-tab-links-left",E.tab.links).width();var F=new Array();A("li",E.tab.links).each(function(K,L){var J=-1*I;if(K>0){J=parseInt(F[K-1])+A(this).prev().width()+2}F.push(J)});var H=-1*parseInt(E.tab.links.ul.css("left"));for(var G=0;G<F.length-1;G++){if(F[G]<H&&F[G+1]>=H){E.tab.links.ul.animate({left:-1*parseInt(F[G])});return}}},moveToNextTabItem:function(){var H=A(".l-tab-links-right",E.tab).width();var M=0;var K=A("li",E.tab.links.ul);K.each(function(){M+=A(this).width()+2});var I=E.tab.width();var L=new Array();for(var F=K.length-1;F>=0;F--){var G=M-I+H+2;if(F!=K.length-1){G=parseInt(L[K.length-2-F])-A(K[F+1]).width()-2}L.push(G)}var J=-1*parseInt(E.tab.links.ul.css("left"));for(var F=1;F<L.length;F++){if(L[F]<=J&&L[F-1]>J){E.tab.links.ul.animate({left:-1*parseInt(L[F-1])});return}}},getTabItemCount:function(){return A("li",E.tab.links.ul).length},getSelectedTabItemID:function(){return A("li.l-selected",E.tab.links.ul).attr("tabid")},removeSelectedTabItem:function(){E.removeTabItem(E.getSelectedTabItemID())},overrideSelectedTabItem:function(F){E.overrideTabItem(E.getSelectedTabItemID(),F)},overrideTabItem:function(J,F){if(B.onBeforeOverrideTabItem&&B.onBeforeOverrideTabItem(J)==false){return false}var G=F.tabid;if(G==undefined){G=E.getNewTabid()}var I=F.url;var M=F.content;var K=F.text;var H=F.showClose;var O=F.height;if(E.isTabItemExist(G)){return}var L=A("li[tabid="+J+"]",E.tab.links.ul);var N=A(".l-tab-content-item[tabid="+J+"]",E.tab.content);if(!L||!N){return}L.attr("tabid",G);N.attr("tabid",G);if(A("iframe",N).length==0&&I){N.html("<iframe frameborder='0'></iframe>")}else{if(M){N.html(M)}}A("iframe",N).attr("name",G);if(H==undefined){H=true}if(H==false){A(".l-tab-links-item-close",L).remove()}else{if(A(".l-tab-links-item-close",L).length==0){L.append("<div class='l-tab-links-item-close'></div>")}}if(K==undefined){K=G}if(O){N.height(O)}A("a",L).text(K);A("iframe",N).attr("src",I);B.onAfterOverrideTabItem&&B.onAfterOverrideTabItem(J)},selectTabItem:function(F){if(B.onBeforeSelectTabItem&&B.onBeforeSelectTabItem(F)==false){return false}E.selectedTabId=F;A("> .l-tab-content-item[tabid="+F+"]",E.tab.content).show().siblings().hide();A("li[tabid="+F+"]",E.tab.links.ul).addClass("l-selected").siblings().removeClass("l-selected");B.onAfterSelectTabItem&&B.onAfterSelectTabItem(F)},moveToLastTabItem:function(){var F=0;A("li",E.tab.links.ul).each(function(){F+=A(this).width()+2});var G=E.tab.width();if(F>G){var H=A(".l-tab-links-right",E.tab.links).width();E.tab.links.ul.animate({left:-1*(F-G+H+2)})}},isTabItemExist:function(F){return A("li[tabid="+F+"]",E.tab.links.ul).length>0},addTabItem:function(F){if(B.onBeforeAddTabItem&&B.onBeforeAddTabItem(G)==false){return false}var G=F.tabid;if(G==undefined){G=E.getNewTabid()}var J=F.url;var L=F.text;var I=F.showClose;var K=F.height;if(E.isTabItemExist(G)){E.selectTabItem(G);return}var M=A("<li><a></a><div class='l-tab-links-item-left'></div><div class='l-tab-links-item-right'></div><div class='l-tab-links-item-close'></div></li>");var N=A("<div class='l-tab-content-item'><iframe frameborder='0'></iframe></div>");if(E.makeFullHeight){var H=E.tab.height()-E.tab.links.height();N.height(H)}M.attr("tabid",G);N.attr("tabid",G);A("iframe",N).attr("name",G);if(I==undefined){I=true}if(I==false){A(".l-tab-links-item-close",M).remove()}if(L==undefined){L=G}if(K){N.height(K)}A("a",M).text(L);A("iframe",N).attr("src",J);E.tab.links.ul.append(M);E.tab.content.append(N);E.selectTabItem(G);if(E.setTabButton()){E.moveToLastTabItem()}E.addTabItemEvent(M);B.onAfterAddTabItem&&B.onAfterAddTabItem(G)},addTabItemEvent:function(F){F.click(function(){var G=A(this).attr("tabid");E.selectTabItem(G)});E.tab.menu&&D.addTabItemContextMenuEven(F);A(".l-tab-links-item-close",F).hover(function(){A(this).addClass("l-tab-links-item-close-over")},function(){A(this).removeClass("l-tab-links-item-close-over")}).click(function(){var G=A(this).parent().attr("tabid");E.removeTabItem(G)})},removeTabItem:function(F){if(B.onBeforeRemoveTabItem&&B.onBeforeRemoveTabItem(F)==false){return false}var G=A("li[tabid="+F+"]",E.tab.links.ul).hasClass("l-selected");if(G){A(".l-tab-content-item[tabid="+F+"]",E.tab.content).prev().show();A("li[tabid="+F+"]",E.tab.links.ul).prev().addClass("l-selected").siblings().removeClass("l-selected")}A(".l-tab-content-item[tabid="+F+"]",E.tab.content).remove();A("li[tabid="+F+"]",E.tab.links.ul).remove();E.setTabButton();B.onAfterRemoveTabItem&&B.onAfterRemoveTabItem(F)},addHeight:function(F){var G=E.tab.height()+F;E.setHeight(G)},setHeight:function(F){E.tab.height(F);E.setContentHeight()},setContentHeight:function(){var F=E.tab.height()-E.tab.links.height();E.tab.content.height(F);A("> .l-tab-content-item",E.tab.content).height(F)},getNewTabid:function(){var F=new Date();return F.getTime()},getTabidList:function(G,H){var F=[];A("> li",E.tab.links.ul).each(function(){if(A(this).attr("tabid")&&A(this).attr("tabid")!=G&&(!H||A(".l-tab-links-item-close",this).length>0)){F.push(A(this).attr("tabid"))}});return F},removeOther:function(G,H){var F=E.getTabidList(G,true);A(F).each(function(){E.removeTabItem(this)})},reload:function(F){A(".l-tab-content-item[tabid="+F+"] iframe",E.tab.content).each(function(H,G){A(G).attr("src",A(G).attr("src"))})},removeAll:function(G){var F=E.getTabidList(null,true);A(F).each(function(){E.removeTabItem(this)})},onResize:function(){if(!B.height||typeof(B.height)!="string"||B.height.indexOf("%")==-1){return false}if(E.tab.parent()[0].tagName.toLowerCase()=="body"){var F=A(window).height();F-=parseInt(E.tab.parent().css("paddingTop"));F-=parseInt(E.tab.parent().css("paddingBottom"));E.height=B.heightDiff+F*parseFloat(E.height)*0.01}else{E.height=B.heightDiff+(E.tab.parent().height()*parseFloat(B.height)*0.01)}E.tab.height(E.height);E.setContentHeight()}};var D={menuItemClick:function(F){if(!F.id||!E.actionTabid){return}switch(F.id){case"close":E.removeTabItem(E.actionTabid);E.actionTabid=null;break;case"closeother":E.removeOther(E.actionTabid);break;case"closeall":E.removeAll();E.actionTabid=null;break;case"reload":E.selectTabItem(E.actionTabid);E.reload(E.actionTabid);break}},addTabItemContextMenuEven:function(F){F.bind("contextmenu",function(G){if(!E.tab.menu){return}E.actionTabid=F.attr("tabid");E.tab.menu.show({top:G.pageY,left:G.pageX});if(A(".l-tab-links-item-close",this).length==0){E.tab.menu.setDisable("close")}else{E.tab.menu.setEnable("close")}return false})}};if(B.height){E.makeFullHeight=true}E.tab=A(this);if(!E.tab.hasClass("l-tab")){E.tab.addClass("l-tab")}if(B.contextmenu&&A.ligerMenu){E.tab.menu=A.ligerMenu({width:100,items:[{text:B.closeMessage,id:"close",click:D.menuItemClick},{text:B.closeOtherMessage,id:"closeother",click:D.menuItemClick},{text:B.closeAllMessage,id:"closeall",click:D.menuItemClick},{text:B.reloadMessage,id:"reload",click:D.menuItemClick}]})}E.tab.content=A('<div class="l-tab-content"></div>');A("> div",E.tab).appendTo(E.tab.content);E.tab.content.appendTo(E.tab);E.tab.links=A('<div class="l-tab-links"><ul style="left: 0px; "></ul></div>');E.tab.links.prependTo(E.tab);E.tab.links.ul=A("ul",E.tab.links);var C=A("> div[lselected=true]",E.tab.content).length>0;E.selectedTabId=A("> div[lselected=true]",E.tab.content).attr("tabid");A("> div",E.tab.content).each(function(J,I){var F=A('<li class=""><a></a><div class="l-tab-links-item-left"></div><div class="l-tab-links-item-right"></div></li>');if(A(I).attr("title")){A("> a",F).html(A(I).attr("title"))}var H=A(I).attr("tabid");if(H==undefined){H=E.getNewTabid();A(I).attr("tabid",H);if(A(I).attr("lselected")){E.selectedTabId=H}}F.attr("tabid",H);if(!C&&J==0){E.selectedTabId=H}var G=A(I).attr("showClose");if(G){F.append("<div class='l-tab-links-item-close'></div>")}A("> ul",E.tab.links).append(F);if(!A(I).hasClass("l-tab-content-item")){A(I).addClass("l-tab-content-item")}});E.selectTabItem(E.selectedTabId);if(B.height){if(typeof(B.height)=="string"&&B.height.indexOf("%")>0){E.onResize();if(B.changeHeightOnResize){A(window).resize(function(){E.onResize()})}}else{E.setHeight(B.height)}}if(E.makeFullHeight){E.setContentHeight()}A("li",E.tab.links).each(function(){E.addTabItemEvent(A(this))});if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_Tab"]=E;this.usedTab=true})}})(jQuery);(function(A){A.fn.ligerTextBox=function(B){return this.each(function(){B=B||{};B=A.extend({onBeforeInput:false,onInputed:false,onChangeValue:false,selectedText:false,selectedValue:false,width:false,nullText:null},B);if(this.usedTextBox){return}var C={};C.inputText=A(this);C.wrapper=C.inputText.wrap('<div class="l-text"></div>').parent();if(!C.inputText.hasClass("l-text-field")){C.inputText.addClass("l-text-field")}if(!B.width){if(C.inputText.attr("lwidth")){B.width=parseInt(C.inputText.attr("lwidth"))}}if(B.width){C.wrapper.css({width:B.width});C.inputText.css({width:B.width-2})}if(B.height){C.wrapper.height(B.height);C.inputText.height(B.height-2)}C.nullText=B.nullText;if(C.nullText==null){if(C.inputText.attr("nulltext")){C.nullText=C.inputText.attr("nulltext")}}if(this.value==""){if(C.nullText!=null){this.value=C.nullText}A(this).addClass("l-text-field-null")}C.inputText.blur(function(){if(this.value==""){if(C.nullText!=null){this.value=C.nullText}A(this).addClass("l-text-field-null")}else{A(this).removeClass("l-text-field-null")}}).focus(function(){if(A(this).hasClass("l-text-field-null")){this.value="";A(this).removeClass("l-text-field-null")}}).change(function(){if(B.onChangeValue){B.onChangeValue(this.value)}});this.usedTextBox=true})}})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetToolBarManager=function(){return LigerUIManagers[this[0].id+"_ToolBar"]};A.fn.ligerToolBar=function(B){return this.each(function(){if(this.usedToolBar){return}var C={addItem:function(D){var E=A('<div class="l-toolbar-item l-panel-btn"><span></span><div class="l-panel-btn-l"></div><div class="l-panel-btn-r"></div></div>');C.toolBar.append(E);D.id&&E.attr("toolbarid",D.id);D.text&&A("span:first",E).html(D.text);D.disable&&E.addClass("l-toolbar-item-disable");D.click&&E.click(function(){D.click(D)});E.hover(function(){A(this).addClass("l-panel-btn-over")},function(){A(this).removeClass("l-panel-btn-over")})}};C.toolBar=A(this);if(!C.toolBar.hasClass("l-toolbar")){C.toolBar.addClass("l-toolbar")}if(B.items){A(B.items).each(function(D,E){C.addItem(E)})}if(this.id==undefined){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_ToolBar"]=C;this.usedToolBar=true})}})(jQuery);if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(A){A.fn.ligerGetTreeManager=function(){return LigerUIManagers[this[0].id+"_Tree"]};A.ligerDefaults=A.ligerDefaults||{};A.ligerDefaults.Tree={url:null,data:null,checkbox:true,autoCheckboxEven:true,parentIcon:"folder",childIcon:"leaf",textFieldName:"text",attribute:["id","url"],treeLine:true,nodeWidth:90,statusName:"__status",isLeaf:null,onBeforeExpand:null,onContextmenu:null,onExpand:null,onBeforeCollapse:null,onCollapse:null,onBeforeSelect:null,onSelect:null,onBeforeCancelSelect:null,onCancelselect:null,onCheck:null,onSuccess:null,onError:null,onClick:null};A.fn.ligerTree=function(B){return this.each(function(){B=A.extend({},A.ligerDefaults.Tree,B||{});if(this.usedTree){return}if(A(this).hasClass("l-hidden")){return}var D={getData:function(){return D.data},hasChildren:function(E){if(B.isLeaf){return B.isLeaf(E)}return E.children?true:false},getParentTreeItem:function(F,I){var G=A(F);if(G.parent().hasClass("l-tree")){return null}if(I==undefined){if(G.parent().parent("li").length==0){return null}return G.parent().parent("li")[0]}var E=parseInt(G.attr("outlinelevel"));var H=G;for(var J=E-1;J>=I;J--){H=H.parent().parent("li")}return H[0]},getChecked:function(){if(!B.checkbox){return null}var E=[];A(".l-checkbox-checked",D.tree).parent().parent("li").each(function(){var F=parseInt(A(this).attr("treedataindex"));E.push({target:this,data:C.getDataNodeByTreeDataIndex(D.data,F)})});return E},getSelected:function(){var F={};F.target=A(".l-selected",D.tree).parent("li")[0];if(F.target){var E=parseInt(A(F.target).attr("treedataindex"));F.data=C.getDataNodeByTreeDataIndex(D.data,E);return F}return null},upgrade:function(E){A(".l-note",E).each(function(){A(this).removeClass("l-note").addClass("l-expandable-open")});A(".l-note-last",E).each(function(){A(this).removeClass("l-note-last").addClass("l-expandable-open")});A("."+C.getChildNodeClassName(),E).each(function(){A(this).removeClass(C.getChildNodeClassName()).addClass(C.getParentNodeClassName(true))})},demotion:function(F){if(!F&&F[0].tagName.toLowerCase()!="li"){return}var E=A(F).hasClass("l-last");A(".l-expandable-open",F).each(function(){A(this).removeClass("l-expandable-open").addClass(E?"l-note-last":"l-note")});A(".l-expandable-close",F).each(function(){A(this).removeClass("l-expandable-close").addClass(E?"l-note-last":"l-note")});A("."+C.getParentNodeClassName(true),F).each(function(){A(this).removeClass(C.getParentNodeClassName(true)).addClass(C.getChildNodeClassName())})},collapseAll:function(){A(".l-expandable-open",D.tree).click()},expandAll:function(){A(".l-expandable-close",D.tree).click()},loadData:function(G,F,E){D.loading.show();E=E||{};A.ajax({type:"post",url:F,data:E,dataType:"json",success:function(H){D.loading.hide();D.append(G,H);if(B.onSuccess){B.onSuccess(H)}},error:function(I,H,J){try{D.loading.hide();if(B.onError){B.onError(I,H,J)}}catch(K){}}})},clear:function(){A("> li",D.tree).each(function(){D.remove(this)})},remove:function(E){var H=parseInt(A(E).attr("treedataindex"));var F=C.getDataNodeByTreeDataIndex(D.data,H);if(F){C.setTreeDataStatus([F],"delete")}var I=D.getParentTreeItem(E);if(B.checkbox){A(".l-checkbox",E).remove();C.setParentCheckboxStatus(A(E))}A(E).remove();if(I==null){I=D.tree.parent()}var G=A("> ul > li",I).length;if(G>0){A("> ul > li",I).each(function(J,K){if(J==0&&!A(this).hasClass("l-first")){A(this).addClass("l-first")}if(J==G-1&&!A(this).hasClass("l-last")){A(this).addClass("l-last")}if(J==0&&J==G-1&&!A(this).hasClass("l-onlychild")){A(this).addClass("l-onlychild")}A("> div .l-note,> div .l-note-last",this).removeClass("l-note l-note-last").addClass(J==G-1?"l-note-last":"l-note");C.setTreeItem(this,{isLast:J==G-1})})}},append:function(I,K){if(!K||!K.length){return false}C.addTreeDataIndexToData(K);C.setTreeDataStatus(K,"add");C.appendData(I,K);if(!I){if(A("> li:last",D.tree).length>0){C.setTreeItem(A("> li:last",D.tree)[0],{isLast:false})}var M=C.getTreeHTMLByData(K,1,[],true);M[M.length-1]=M[0]="";D.tree.append(M.join(""));A(".l-body",D.tree).hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")});C.upadteTreeWidth();return}var F=A(I);var E=parseInt(F.attr("outlinelevel"));var H=A("> ul",F).length>0;if(!H){F.append("<ul class='l-children'></ul>");D.upgrade(I)}if(A("> .l-children > li:last",F).length>0){C.setTreeItem(A("> .l-children > li:last",F)[0],{isLast:false})}var L=[];for(var J=1;J<=E-1;J++){var G=A(D.getParentTreeItem(I,J));L.push(G.hasClass("l-last"))}L.push(F.hasClass("l-last"));var M=C.getTreeHTMLByData(K,E+1,L,true);M[M.length-1]=M[0]="";A(">.l-children",I).append(M.join(""));C.upadteTreeWidth();A(">.l-children .l-body",I).hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")})}};var C={getDataNodeByTreeDataIndex:function(H,G){for(var E=0;E<H.length;E++){if(H[E].treedataindex==G){return H[E]}if(H[E].children){var F=C.getDataNodeByTreeDataIndex(H[E].children,G);if(F){return F}}}return null},setTreeDataStatus:function(F,E){A(F).each(function(){this[B.statusName]=E;if(this.children){C.setTreeDataStatus(this.children,E)}})},addTreeDataIndexToData:function(E){A(E).each(function(){if(this.treedataindex!=undefined){return}this.treedataindex=D.treedataindex++;if(this.children){C.addTreeDataIndexToData(this.children)}})},appendData:function(E,H){var G=parseInt(A(E).attr("treedataindex"));var F=C.getDataNodeByTreeDataIndex(D.data,G);if(D.treedataindex==undefined){D.treedataindex=0}if(F&&F.children==undefined){F.children=[]}A(H).each(function(I,J){if(F){F.children[F.children.length]=A.extend({},J)}else{D.data[D.data.length]=A.extend({},J)}})},setTreeItem:function(F,H){if(!H){return}var G=A(F);var E=parseInt(G.attr("outlinelevel"));if(H.isLast!=undefined){if(H.isLast==true){G.removeClass("l-last").addClass("l-last");A("> div .l-note",G).removeClass("l-note").addClass("l-note-last");A(".l-children li",G).find(".l-box:eq("+(E-1)+")").removeClass("l-line")}else{if(H.isLast==false){G.removeClass("l-last");A("> div .l-note-last",G).removeClass("l-note-last").addClass("l-note");A(".l-children li",G).find(".l-box:eq("+(E-1)+")").removeClass("l-line").addClass("l-line")}}}},upadteTreeWidth:function(){var E=D.maxOutlineLevel*22;if(B.checkbox){E+=22}if(B.parentIcon||B.childIcon){E+=22}E+=B.nodeWidth;D.tree.width(E)},getChildNodeClassName:function(){return"l-tree-icon-"+B.childIcon},getParentNodeClassName:function(E){var F="l-tree-icon-"+B.parentIcon;if(E){F+="-open"}return F},getTreeHTMLByData:function(L,K,P,H){if(D.maxOutlineLevel<K){D.maxOutlineLevel=K}P=P||[];K=K||1;var M=[];if(!H){M.push('<ul class="l-children" style="display:none">')}else{M.push("<ul class='l-children'>")}for(var E=0;E<L.length;E++){var G=E==0;var I=E==L.length-1;var O=true;if(L[E].isexpand==false||L[E].isexpand=="false"){O=false}M.push("<li ");if(L[E].treedataindex!=undefined){M.push('treedataindex="'+L[E].treedataindex+'" ')}if(O){M.push("isexpand="+L[E].isexpand+" ")}M.push("outlinelevel="+K+" ");for(var F=0;F<D.sysAttribute.length;F++){if(A(this).attr(D.sysAttribute[F])){L[dataindex][D.sysAttribute[F]]=A(this).attr(D.sysAttribute[F])}}for(var F=0;F<B.attribute.length;F++){if(L[E][B.attribute[F]]){M.push(B.attribute[F]+'="'+L[E][B.attribute[F]]+'" ')}}M.push('class="');G&&M.push("l-first ");I&&M.push("l-last ");G&&I&&M.push("l-onlychild ");M.push('"');M.push(">");M.push('<div class="l-body">');for(var N=0;N<=K-2;N++){if(P[N]){M.push('<div class="l-box"></div>')}else{M.push('<div class="l-box l-line"></div>')}}if(D.hasChildren(L[E])){if(O){M.push('<div class="l-box l-expandable-open"></div>')}else{M.push('<div class="l-box l-expandable-close"></div>')}if(B.checkbox){if(L[E].ischecked){M.push('<div class="l-box l-checkbox l-checkbox-checked"></div>')}else{M.push('<div class="l-box l-checkbox l-checkbox-unchecked"></div>')}}B.parentIcon&&!O&&M.push('<div class="l-box '+C.getParentNodeClassName()+'"></div>');B.parentIcon&&O&&M.push('<div class="l-box '+C.getParentNodeClassName(true)+'"></div>')}else{if(I){M.push('<div class="l-box l-note-last"></div>')}else{M.push('<div class="l-box l-note"></div>')}if(B.checkbox){if(L[E].ischecked){M.push('<div class="l-box l-checkbox l-checkbox-checked"></div>')}else{M.push('<div class="l-box l-checkbox l-checkbox-unchecked"></div>')}}B.childIcon&&M.push('<div class="l-box '+C.getChildNodeClassName()+'"></div>')}M.push("<span>"+L[E][B.textFieldName]+"</span></div>");if(D.hasChildren(L[E])){var J=[];for(var N=0;N<P.length;N++){J.push(P[N])}J.push(I);M.push(C.getTreeHTMLByData(L[E].children,K+1,J,O).join(""))}M.push("</li>")}M.push("</ul>");return M},getDataByTreeHTML:function(E){var F=[];A("> li",E).each(function(I,J){var H=F.length;F[H]={treedataindex:D.treedataindex++};F[H][B.textFieldName]=A("> span,> a",this).html();for(var G=0;G<D.sysAttribute.length;G++){if(A(this).attr(D.sysAttribute[G])){F[H][D.sysAttribute[G]]=A(this).attr(D.sysAttribute[G])}}for(var G=0;G<B.attribute.length;G++){if(A(this).attr(B.attribute[G])){F[H][B.attribute[G]]=A(this).attr(B.attribute[G])}}if(A("> ul",this).length>0){F[H].children=C.getDataByTreeHTML(A("> ul",this))}});return F},applyTree:function(){D.data=C.getDataByTreeHTML(D.tree);var E=C.getTreeHTMLByData(D.data,1,[],true);E[E.length-1]=E[0]="";D.tree.html(E.join(""));C.upadteTreeWidth();A(".l-body",D.tree).hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")})},applyTreeEven:function(E){A("> .l-body",E).hover(function(){A(this).addClass("l-over")},function(){A(this).removeClass("l-over")})},setTreeEven:function(){B.onContextmenu&&D.tree.bind("contextmenu",function(H){var I=(H.target||H.srcElement);var F=null;if(I.tagName.toLowerCase()=="a"||I.tagName.toLowerCase()=="span"||A(I).hasClass("l-box")){F=A(I).parent().parent()}else{if(A(I).hasClass("l-body")){F=A(I).parent()}else{if(I.tagName.toLowerCase()=="li"){F=A(I)}}}if(!F){return}var G=parseInt(F.attr("treedataindex"));var E=C.getDataNodeByTreeDataIndex(D.data,G);return B.onContextmenu({data:E,target:F[0]},H)});D.tree.click(function(I){var J=(I.target||I.srcElement);var F=null;if(J.tagName.toLowerCase()=="a"||J.tagName.toLowerCase()=="span"||A(J).hasClass("l-box")){F=A(J).parent().parent()}else{if(A(J).hasClass("l-body")){F=A(J).parent()}else{F=A(J)}}if(!F){return}var H=parseInt(F.attr("treedataindex"));var E=C.getDataNodeByTreeDataIndex(D.data,H);var G=A(".l-body:first .l-expandable-open:first,.l-body:first .l-expandable-close:first",F);if(!A(J).hasClass("l-checkbox")){if(A(">div:first",F).hasClass("l-selected")){if(B.onBeforeCancelSelect&&B.onBeforeCancelSelect({data:E,target:F[0]})==false){return false}A(">div:first",F).removeClass("l-selected");B.onCancelSelect&&B.onCancelSelect({data:E,target:F[0]})}else{if(B.onBeforeSelect&&B.onBeforeSelect({data:E,target:F[0]})==false){return false}A(".l-body",D.tree).removeClass("l-selected");A(">div:first",F).addClass("l-selected");B.onSelect&&B.onSelect({data:E,target:F[0]})}}if(A(J).hasClass("l-checkbox")){if(B.autoCheckboxEven){if(A(J).hasClass("l-checkbox-unchecked")){A(J).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked");A(".l-children .l-checkbox",F).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked");B.onCheck&&B.onCheck({data:E,target:F[0]},true)}else{if(A(J).hasClass("l-checkbox-checked")){A(J).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked");A(".l-children .l-checkbox",F).removeClass("l-checkbox-incomplete l-checkbox-checked").addClass("l-checkbox-unchecked");B.onCheck&&B.onCheck({data:E,target:F[0]},false)}else{if(A(J).hasClass("l-checkbox-incomplete")){A(J).removeClass("l-checkbox-incomplete").addClass("l-checkbox-checked");A(".l-children .l-checkbox",F).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked");B.onCheck&&B.onCheck({data:E,target:F[0]},true)}}}C.setParentCheckboxStatus(F)}}else{if(G.hasClass("l-expandable-open")){if(B.onBeforeCollapse&&B.onBeforeCollapse({data:E,target:F[0]})==false){return false}G.removeClass("l-expandable-open").addClass("l-expandable-close");A("> .l-children",F).slideToggle("fast");A("> div ."+C.getParentNodeClassName(true),F).removeClass(C.getParentNodeClassName(true)).addClass(C.getParentNodeClassName());B.onCollapse&&B.onCollapse({data:E,target:F[0]})}else{if(G.hasClass("l-expandable-close")){if(B.onBeforeExpand&&B.onBeforeExpand({data:E,target:F[0]})==false){return false}G.removeClass("l-expandable-close").addClass("l-expandable-open");A("> .l-children",F).slideToggle("fast",function(){B.onExpand&&B.onExpand({data:E,target:F[0]})});A("> div ."+C.getParentNodeClassName(),F).removeClass(C.getParentNodeClassName()).addClass(C.getParentNodeClassName(true))}}}B.onClick&&B.onClick({data:E,target:F[0]})})},setParentCheckboxStatus:function(G){var F=A(".l-checkbox-unchecked",G.parent()).length==0;var E=A(".l-checkbox-checked",G.parent()).length==0;if(F){G.parent().prev().find(".l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-incomplete").addClass("l-checkbox-checked")}else{if(E){G.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-checked l-checkbox-incomplete").addClass("l-checkbox-unchecked")}else{G.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-checked").addClass("l-checkbox-incomplete")}}if(G.parent().parent("li").length>0){C.setParentCheckboxStatus(G.parent().parent("li"))}}};if(!A(this).hasClass("l-tree")){A(this).addClass("l-tree")}D.tree=A(this);if(!B.treeLine){D.tree.addClass("l-tree-noline")}D.sysAttribute=["isexpand","ischecked","href","style"];D.loading=A("<div class='l-tree-loading'></div>");D.tree.after(D.loading);D.data=[];D.maxOutlineLevel=1;D.treedataindex=0;C.applyTree();C.setTreeEven();if(B.data){D.append(null,B.data)}if(B.url){D.loadData(null,B.url)}if(this.id==undefined||this.id==""){this.id="LigerUI_"+new Date().getTime()}LigerUIManagers[this.id+"_Tree"]=D;this.usedTree=true})}})(jQuery);(function(A){A.fn.ligerApplyWindow=function(B){return this.each(function(){B=A.extend({showClose:true,showMax:true,showToggle:true},B||{});var C={};C.window=A('<div class="l-window"><div class="l-window-header"><div class="l-window-header-buttons"><div class="l-window-toggle"></div><div class="l-window-max"></div><div class="l-window-close"></div><div class="l-clear"></div></div><div class="l-window-header-inner"></div></div><div class="l-window-content"></div></div>');C.window.content=A(".l-window-content",C.window);C.window.header=A(".l-window-header",C.window);A(this).appendTo(C.window.content);A.ligerWindow.switchWindow(C.window[0]);A("body").append(C.window);B.left&&C.window.css("left",B.left);B.right&&C.window.css("right",B.right);B.top&&C.window.css("top",B.top);B.bottom&&C.window.css("bottom",B.bottom);B.width&&C.window.width(B.width);B.height&&C.window.content.height(B.height-28);B.title&&A(".l-window-header-inner",C.window.header).html(B.title);B.framename&&A(">iframe",C.window.content).attr("name",B.framename);if(!B.showToggle){A(".l-window-toggle",C.window).remove()}if(!B.showMax){A(".l-window-max",C.window).remove()}if(!B.showClose){A(".l-window-close",C.window).remove()}if(A.fn.ligerDrag){C.window.ligerDrag({handler:".l-window-header",onStartDrag:function(){A.ligerWindow.switchWindow(C.window[0]);C.window.addClass("l-window-dragging");C.window.content.children().hide()},onStopDrag:function(){C.window.removeClass("l-window-dragging");C.window.content.children().show()}})}if(A.fn.ligerResizable){C.window.ligerResizable({onStartResize:function(){A.ligerWindow.switchWindow(C.window[0]);if(A(".l-window-max",C.window).hasClass("l-window-regain")){A(".l-window-max",C.window).removeClass("l-window-regain")}},onStopResize:function(D,G){var E=0;var F=0;if(!isNaN(parseInt(C.window.css("top")))){E=parseInt(C.window.css("top"))}if(!isNaN(parseInt(C.window.css("left")))){F=parseInt(C.window.css("left"))}if(D.diffTop!=undefined){C.window.css({top:E+D.diffTop,left:F+D.diffLeft,width:D.newWidth});C.window.content.height(D.newHeight-28)}return false}});C.window.append("<div class='l-btn-nw-drop'></div>")}A(".l-window-toggle",C.window).click(function(){if(A(this).hasClass("l-window-toggle-close")){A(this).removeClass("l-window-toggle-close")}else{A(this).addClass("l-window-toggle-close")}C.window.content.slideToggle()});A(".l-window-close",C.window).click(function(){if(B.onClose&&B.onClose()==false){return false}C.window.hide()});A(".l-window-max",C.window).click(function(){if(A(this).hasClass("l-window-regain")){if(B.onRegain&&B.onRegain()==false){return false}C.window.width(C.lastWindowWidth).css({left:C.lastWindowLeft,top:C.lastWindowTop});C.window.content.height(C.lastWindowHeight-28);A(this).removeClass("l-window-regain")}else{if(B.onMax&&B.onMax()==false){return false}C.lastWindowWidth=C.window.width();C.lastWindowHeight=C.window.height();C.lastWindowLeft=C.window.css("left");C.lastWindowTop=C.window.css("top");C.window.width(A(window).width()-2).css({left:0,top:0});C.window.content.height(A(window).height()-28);A(this).addClass("l-window-regain")}})})};A.ligerWindow={};A.ligerWindow.switchWindow=function(B){A(B).css("z-index","101").siblings(".l-window").css("z-index","100")};A.ligerWindow.show=function(E){E=E||{};if(E.url){var C=A("<iframe frameborder='0' src='"+E.url+"'></iframe>");var D="window"+new Date().getTime();if(E.name){D=E.name}C.attr("name",D);E.framename=D;C.ligerApplyWindow(A.extend({},E))}else{if(E.content){var B=A("<div>"+E.content+"</div>");B.ligerApplyWindow(A.extend({},E))}else{if(E.target){E.target.ligerApplyWindow(A.extend({},E))}}}}})(jQuery);